import { useState, useEffect, useRef, useCallback, useMemo } from "react";
var LR={es:{f:"Romance",mi:[{c:"pt",n:"Portuguese",p:75,t:"High lexical overlap"},{c:"it",n:"Italian",p:55,t:"Romance cognates"}],cb:[{c:"en",n:"English",pr:"Very High",t:"Most bilingual"}],rc:[{p:["es","en"],l:"Spanish > English",f:"Excellent"}],cult:"Largest LEP. Regional dialect awareness critical.",wr:"Extensive materials available."},ar:{f:"Semitic",mi:[{c:"arz",n:"Egyptian",p:75,t:"Media exposure"},{c:"apc",n:"Levantine",p:65,t:"Regional"},{c:"ary",n:"Maghrebi",p:35,t:"LOW with Eastern"}],cb:[{c:"fr",n:"French",pr:"High",t:"Maghrebi French-bilingual"},{c:"en",n:"English",pr:"Moderate",t:"Urban"}],rc:[{p:["ar","en"],l:"Arabic > English",f:"Good"},{p:["ary","fr","en"],l:"Maghrebi > French > English",f:"Excellent"}],cult:"ALWAYS ask country. Levantine CANNOT serve Maghrebi (35%).",wr:"MSA for educated."},zh:{f:"Sino-Tibetan",mi:[{c:"yue",n:"Cantonese",p:15,t:"Spoken unintelligible"}],cb:[{c:"en",n:"English",pr:"Moderate",t:"Urban"}],rc:[{p:["zh","en"],l:"Mandarin > English",f:"Good"}],cult:"Mandarin/Cantonese NOT mutual spoken.",wr:"Written bridges some."},vi:{f:"Austroasiatic",mi:[],cb:[{c:"en",n:"English",pr:"Moderate",t:"Younger gen"}],rc:[{p:["vi","en"],l:"Vietnamese > English",f:"Good"}],cult:"Well-established US.",wr:"Available."},ko:{f:"Koreanic",mi:[],cb:[{c:"en",n:"English",pr:"Moderate",t:"Urban"}],rc:[{p:["ko","en"],l:"Korean > English",f:"Good"}],cult:"Language isolate.",wr:"Available."},hi:{f:"Indo-Aryan",mi:[{c:"ur",n:"Urdu",p:90,t:"Spoken identical. DIFFERENT scripts."},{c:"ne",n:"Nepali",p:55,t:"Related"},{c:"pa",n:"Punjabi",p:60,t:"Moderate"}],cb:[{c:"en",n:"English",pr:"High",t:"Widely spoken India"},{c:"ur",n:"Urdu",pr:"Very High",t:"Spoken bridge"}],rc:[{p:["hi","en"],l:"Hindi > English",f:"Excellent"}],cult:"Hindi-Urdu spoken works. CANNOT serve Tamil/Dravidian.",wr:"Devanagari/Nastaliq NOT interchangeable."},ur:{f:"Indo-Aryan",mi:[{c:"hi",n:"Hindi",p:90,t:"Shared Hindustani"}],cb:[{c:"en",n:"English",pr:"Moderate",t:"Urban"}],rc:[{p:["ur","en"],l:"Urdu > English",f:"Good"}],cult:"Nastaliq script only.",wr:"Nastaliq."},my:{f:"Sino-Tibetan",mi:[],cb:[{c:"en",n:"English",pr:"Low",t:"Urban only"}],rc:[{p:["my","en"],l:"Burmese > English",f:"Good"}],cult:"Bridge for Chin/Karen BUT verify.",wr:"Limited."},hmn:{f:"Hmong-Mien",mi:[{c:"hmn_g",n:"Green Hmong",p:70,t:"Mostly intelligible"}],cb:[{c:"en",n:"English",pr:"Moderate",t:"Younger"}],rc:[{p:["hmn","en"],l:"Hmong > English",f:"Good"}],cult:"WI/MN largest.",wr:"RPA romanization."},kar:{f:"Karenic",mi:[{c:"kjp",n:"Pwo Karen",p:65,t:"Related"}],cb:[{c:"my",n:"Burmese",pr:"Moderate",t:"Varies"}],rc:[{p:["kar","my","en"],l:"Karen > Burmese > English",f:"Moderate"}],cult:"NOT Chin. High refugee NC.",wr:"Myanmar script."},cnh:{f:"Kuki-Chin",mi:[{c:"cfm",n:"Falam",p:60,t:"Related"},{c:"ctd",n:"Tedim",p:25,t:"DISTINCT"}],cb:[{c:"my",n:"Burmese",pr:"Moderate",t:"Varies"}],rc:[{p:["cnh","my","en"],l:"Hakha > Burmese > English",f:"Moderate"}],cult:"50+ varieties, 15% intelligibility.",wr:"Latin."},so:{f:"Cushitic",mi:[{c:"so_m",n:"Maay Maay",p:50,t:"Reduced"}],cb:[{c:"ar",n:"Arabic",pr:"Moderate",t:"Quranic"},{c:"en",n:"English",pr:"Moderate",t:"Younger"}],rc:[{p:["so","en"],l:"Somali > English",f:"Good"}],cult:"Maxaa vs Maay limited.",wr:"Latin 1972."},sw:{f:"Bantu",mi:[{c:"sw_cd",n:"Congo Swahili",p:70,t:"Differs from EA"}],cb:[{c:"en",n:"English",pr:"High",t:"EA education"},{c:"fr",n:"French",pr:"High",t:"Congolese bilingual"}],rc:[{p:["sw","en"],l:"Swahili > English",f:"Excellent"}],cult:"Bridge 100+ EA/CA languages.",wr:"EA health agencies."},am:{f:"Semitic",mi:[{c:"ti",n:"Tigrinya",p:30,t:"Limited"}],cb:[{c:"en",n:"English",pr:"Moderate",t:"Urban"}],rc:[{p:["am","en"],l:"Amharic > English",f:"Good"}],cult:"NOT interchangeable with Tigrinya.",wr:"Geez."},ti:{f:"Semitic",mi:[{c:"am",n:"Amharic",p:30,t:"Limited"}],cb:[{c:"en",n:"English",pr:"Moderate",t:"Younger"}],rc:[{p:["ti","en"],l:"Tigrinya > English",f:"Good"}],cult:"Eritrea/Ethiopia different.",wr:"Geez."},ne:{f:"Indo-Aryan",mi:[{c:"hi",n:"Hindi",p:55,t:"Related"}],cb:[{c:"en",n:"English",pr:"Moderate",t:"Urban"},{c:"hi",n:"Hindi",pr:"High",t:"Bridge OK"}],rc:[{p:["ne","en"],l:"Nepali > English",f:"Good"}],cult:"Bhutanese-Nepali growing.",wr:"Devanagari."},kln:{f:"Nilotic",mi:[{c:"kln_n",n:"Nandi",p:90,t:"Sub-dialect"},{c:"kln_k",n:"Kipsigis",p:85,t:"Sub-dialect"}],cb:[{c:"sw",n:"Swahili",pr:"Very High",t:"Nearly all speak"},{c:"en",n:"English",pr:"High",t:"Kenya official"}],rc:[{p:["kln","sw","en"],l:"Kalenjin > Swahili > English",f:"Excellent"}],cult:"Chicago Rogers Park/Uptown.",wr:"Use Swahili supplement."},kam:{f:"Bantu",mi:[{c:"ki",n:"Kikuyu",p:45,t:"Overlap"}],cb:[{c:"sw",n:"Swahili",pr:"Very High",t:"All learn"},{c:"en",n:"English",pr:"High",t:"Official"}],rc:[{p:["kam","sw","en"],l:"Kamba > Swahili > English",f:"Excellent"}],cult:"Midwest diaspora.",wr:"Swahili materials."},fr:{f:"Romance",mi:[{c:"ht",n:"Haitian Creole",p:30,t:"Limited"}],cb:[{c:"en",n:"English",pr:"High",t:"Multilingual"}],rc:[{p:["fr","en"],l:"French > English",f:"Excellent"}],cult:"African French fastest GA.",wr:"Available."},ru:{f:"Slavic",mi:[{c:"uk",n:"Ukrainian",p:60,t:"Related"}],cb:[{c:"en",n:"English",pr:"Moderate",t:"Urban"}],rc:[{p:["ru","en"],l:"Russian > English",f:"Good"}],cult:"Bridge for ex-Soviet.",wr:"Cyrillic."},ee:{f:"Gbe",mi:[{c:"fon",n:"Fon",p:40,t:"Gbe cluster"}],cb:[{c:"fr",n:"French",pr:"High",t:"Togo"},{c:"en",n:"English",pr:"High",t:"Ghana"}],rc:[{p:["ee","en"],l:"Ewe > English",f:"Good"}],cult:"Ghana(EN) vs Togo(FR).",wr:"Latin tones."},fon:{f:"Gbe",mi:[{c:"ee",n:"Ewe",p:40,t:"Gbe"}],cb:[{c:"fr",n:"French",pr:"Very High",t:"Benin"}],rc:[{p:["fon","fr","en"],l:"Fon > French > English",f:"Excellent"}],cult:"Benin. French reliable.",wr:"Latin."}};
var STRATS=[{icon:"üîó",title:"Community Health Workers",desc:"Partner with orgs for bilingual CHWs.",cat:"community",when:"No interpreter for community language.",comp:"Non-clinical only."},{icon:"üì±",title:"Digital Intake",desc:"Tablet forms in 30+ languages.",cat:"technology",when:"Cannot communicate need.",comp:"Must provide live interpreter."},{icon:"üéØ",title:"Dialect-Specific Dispatch",desc:"Always ask country/region before dispatching.",cat:"linguistic",when:"Arabic, Chinese, Chin, Karen, South Asian.",comp:"PC.02.01.21."},{icon:"üìã",title:"Visual Boards",desc:"Picture boards for pain, body parts.",cat:"documentation",when:"Emergency triage.",comp:"Supplement only."},{icon:"üí∞",title:"Vendor Escalation",desc:"Internal > primary > secondary > rare.",cat:"vendor",when:"Language unavailable.",comp:"Document attempts."},{icon:"üè•",title:"Capacity Building",desc:"Recruit from refugee communities.",cat:"internal",when:"Repeated high-volume.",comp:"Qualification standards."},{icon:"üåê",title:"Relay Governance",desc:"8-step checklist with documentation.",cat:"linguistic",when:"No direct or vendor.",comp:"Prohibited consent/psych/EOL."},{icon:"üìä",title:"Predictive Staffing",desc:"Census + refugee data to hire ahead.",cat:"technology",when:"Annual recruitment.",comp:"Rewire 2030."}];
var HA=[{code:"ase",name:"ASL"},{code:"kar",name:"Karen"},{code:"cnh",name:"Hakha Chin"},{code:"kln",name:"Kalenjin"},{code:"kam",name:"Kamba"},{code:"hmn",name:"Hmong"},{code:"ee",name:"Ewe"},{code:"fon",name:"Fon"}];
var INTERPS=[{id:1,name:"Maria Santos",langs:["es","pt"],mods:["In-Person","Video","Phone"],loc:"Illinois",on:true,rate:4.9},{id:2,name:"Wei Chen",langs:["zh"],mods:["In-Person","Video"],loc:"Illinois",on:true,rate:4.8},{id:3,name:"Fatima Al-Rashid",langs:["ar","fr"],mods:["Video","Phone"],loc:"North Carolina",on:false,rate:4.7},{id:4,name:"Olga Petrov",langs:["ru","uk"],mods:["In-Person","Phone"],loc:"Wisconsin",on:true,rate:4.6},{id:5,name:"Thanh Nguyen",langs:["vi"],mods:["In-Person","Video","Phone"],loc:"Georgia",on:true,rate:4.9},{id:6,name:"Priya Sharma",langs:["hi","ur","pa"],mods:["Video","Phone"],loc:"South Carolina",on:true,rate:4.8},{id:7,name:"Kofi Asante",langs:["tw","fr"],mods:["In-Person","Video"],loc:"Illinois",on:false,rate:4.5},{id:8,name:"Yuki Tanaka",langs:["ja","ko"],mods:["Video","Phone"],loc:"Wisconsin",on:true,rate:4.7},{id:9,name:"Ana Reyes",langs:["es"],mods:["In-Person","Video","Phone"],loc:"Alabama",on:true,rate:4.9},{id:10,name:"Samuel Bekele",langs:["am","ti"],mods:["Phone","Video"],loc:"North Carolina",on:true,rate:4.6},{id:11,name:"Linh Tran",langs:["vi"],mods:["In-Person"],loc:"Georgia",on:false,rate:4.8},{id:12,name:"Carlos Mendez",langs:["es"],mods:["In-Person","Video","Phone"],loc:"Illinois",on:true,rate:4.7},{id:13,name:"Sarah Kim",langs:["ko","ase"],mods:["In-Person","Video"],loc:"Illinois",on:true,rate:4.9},{id:14,name:"Aisha Mohammed",langs:["so","ar","sw"],mods:["Phone","Video"],loc:"Wisconsin",on:true,rate:4.7},{id:15,name:"Pa Kou Vang",langs:["hmn"],mods:["In-Person","Video"],loc:"Wisconsin",on:true,rate:4.8},{id:16,name:"Emmanuel Kipchoge",langs:["kln","sw"],mods:["Video","Phone"],loc:"Illinois",on:true,rate:4.6},{id:17,name:"Naw Eh Paw",langs:["kar","my"],mods:["In-Person","Phone"],loc:"North Carolina",on:true,rate:4.7},{id:18,name:"Rosa Chitay",langs:["es"],mods:["In-Person","Video"],loc:"Georgia",on:false,rate:4.5}];
var ALL_LOCS=Array.from(new Set(INTERPS.map(function(i){return i.loc}))).sort();
var ALL_MODS=["In-Person","Video","Phone"];
var MPHR=["Patient consent","Take medication with food","Do you have allergies?","Rate pain 1-10","Sign discharge papers","Next appointment scheduled","Have you eaten today?","Where does it hurt?","Taking any medications?","Need to run tests"];
var FBLANG=[{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"bn",name:"Bengali"},{code:"my",name:"Burmese"},{code:"zh",name:"Chinese"},{code:"en",name:"English"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian Creole"},{code:"hi",name:"Hindi"},{code:"hmn",name:"Hmong"},{code:"ja",name:"Japanese"},{code:"km",name:"Khmer"},{code:"ko",name:"Korean"},{code:"lo",name:"Lao"},{code:"ne",name:"Nepali"},{code:"om",name:"Oromo"},{code:"ps",name:"Pashto"},{code:"fa",name:"Persian"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"pa",name:"Punjabi"},{code:"ru",name:"Russian"},{code:"so",name:"Somali"},{code:"es",name:"Spanish"},{code:"sw",name:"Swahili"},{code:"tl",name:"Tagalog"},{code:"ta",name:"Tamil"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"tr",name:"Turkish"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"vi",name:"Vietnamese"},{code:"yo",name:"Yoruba"},{code:"ee",name:"Ewe"},{code:"tw",name:"Twi"},{code:"kln",name:"Kalenjin"},{code:"kam",name:"Kamba"},{code:"kar",name:"Karen"},{code:"cnh",name:"Hakha Chin"},{code:"ase",name:"ASL"}];
var FACS=[{n:"Christ Medical",s:"Illinois"},{n:"Illinois Masonic",s:"Illinois"},{n:"Lutheran General",s:"Illinois"},{n:"Aurora Medical",s:"Wisconsin"},{n:"Aurora Sinai",s:"Wisconsin"},{n:"Carolinas Medical",s:"North Carolina"},{n:"Mercy Hospital",s:"North Carolina"},{n:"Pineville",s:"North Carolina"},{n:"Navicent Health",s:"Georgia"},{n:"Floyd Medical",s:"Georgia"},{n:"Kenilworth",s:"South Carolina"},{n:"SE Alabama Med",s:"Alabama"},{n:"Wake Forest",s:"North Carolina"}];
var DLANGS=[{n:"Spanish",p:42},{n:"Vietnamese",p:8},{n:"Chinese",p:7},{n:"Arabic",p:7},{n:"Korean",p:5},{n:"Burmese",p:4},{n:"Nepali",p:4},{n:"Hmong",p:4},{n:"Somali",p:3},{n:"Russian",p:3},{n:"Swahili",p:2},{n:"Karen",p:2},{n:"Amharic",p:2},{n:"French",p:2},{n:"Hindi",p:2}];
var RELAY=[{id:1,step:"Confirm no direct interpreter",crit:true,desc:"Verify all channels.",no:"Do not initiate."},{id:2,step:"Identify bridge language",crit:true,desc:"Confirm patient speaks bridge.",no:"Use vendor OPI."},{id:3,step:"Verify interpreter quals",crit:true,desc:"Qualified BOTH languages.",no:"Request from vendor."},{id:4,step:"Assess complexity",crit:true,desc:"PROHIBITED: consent, psych, EOL.",no:"Get direct interpreter."},{id:5,step:"Patient disclosure",crit:true,desc:"Standardized script. Document.",no:"Do not proceed."},{id:6,step:"Brief interpreters",crit:false,desc:"Context, turn-taking.",no:"Abbreviated."},{id:7,step:"Brief clinician",crit:false,desc:"Explain relay process.",no:"Key points."},{id:8,step:"Activate documentation",crit:true,desc:"Open template BEFORE encounter.",no:"Complete within 4hrs."}];
var RESC=[{t:"Patient confused",a:"PAUSE. Teach-back. Terminate if failed.",s:"high"},{t:"Interpreter difficulty",a:"PAUSE. Simplify. Terminate if persistent.",s:"high"},{t:"Cannot relay terminology",a:"Visual aids. Terminate if critical.",s:"high"},{t:"Patient requests different",a:"Honor immediately.",s:"med"},{t:"Exceeds 45 minutes",a:"Break. Assess fatigue.",s:"med"}];
var DC={arabic:{name:"Arabic Continuum",risk:"HIGH",scenario:"Misdiagnosis from dialect mismatch. $1.85M-$8.3M.",warn:"Levantine interpreter CANNOT serve Maghrebi patient. ALWAYS ask country of origin.",vars:[{n:"MSA (Modern Standard)",r:"Formal/Written",i:"Understood by educated speakers only. Not spoken natively.",rk:"med"},{n:"Levantine",r:"Syria/Lebanon/Jordan/Palestine",i:"75% Egyptian, 35% Maghrebi",rk:"low"},{n:"Egyptian",r:"Egypt",i:"Most widely understood via media. Bridge dialect.",rk:"low"},{n:"Gulf",r:"Saudi/UAE/Qatar/Kuwait",i:"55% Levantine, 30% Maghrebi",rk:"med"},{n:"Maghrebi",r:"Morocco/Algeria/Tunisia/Libya",i:"35% Levantine. French often better bridge.",rk:"crit"},{n:"Sudanese",r:"Sudan",i:"60% Egyptian, distinct vocabulary",rk:"med"},{n:"Iraqi",r:"Iraq",i:"70% Levantine, distinct phonology",rk:"med"},{n:"Yemeni",r:"Yemen",i:"45% Gulf, archaic features",rk:"high"}]},chinKaren:{name:"Chin-Karen-Burmese Complex",risk:"HIGH",scenario:"OB relay failure. $7M-$27M. NC/SC highest volume.",warn:"Chin is NOT one language (50+ varieties). Karen is completely separate. Burmese is NOT a reliable bridge for all.",vars:[{n:"Hakha Chin",r:"Hakha, Chin State",i:"60% Falam, 25% Tedim. Most common in US.",rk:"med"},{n:"Falam Chin",r:"Falam, Chin State",i:"60% Hakha, limited Tedim",rk:"med"},{n:"Tedim Chin",r:"Tedim, Chin State",i:"25% Hakha. DISTINCT language.",rk:"crit"},{n:"Mizo (Lushai)",r:"Mizoram, India",i:"40% Hakha. Often grouped incorrectly.",rk:"high"},{n:"Sgaw Karen",r:"Karen State, Myanmar",i:"<10% any Chin variety. Separate family.",rk:"high"},{n:"Pwo Karen",r:"Karen State, Myanmar",i:"65% Sgaw Karen",rk:"high"},{n:"Burmese",r:"Myanmar (national)",i:"Bridge ONLY if speaker proficient. Verify.",rk:"med"},{n:"Karenni (Kayah)",r:"Kayah State",i:"<20% Karen. Distinct.",rk:"crit"}]},southAsian:{name:"South Asian Complex",risk:"MED-HIGH",scenario:"Script mismatch causing medication errors. Hindi/Urdu spoken bridge fails for Dravidian.",warn:"Hindi CANNOT serve Tamil/Telugu/Malayalam (Dravidian family). Spoken Hindi-Urdu works but scripts differ.",vars:[{n:"Hindi",r:"North/Central India",i:"90% Urdu spoken. Devanagari script.",rk:"low"},{n:"Urdu",r:"Pakistan/N. India",i:"90% Hindi spoken. Nastaliq script. DIFFERENT written.",rk:"low"},{n:"Punjabi",r:"India/Pakistan",i:"60% Hindi. Gurmukhi vs Shahmukhi scripts.",rk:"med"},{n:"Bengali",r:"Bangladesh/W. Bengal",i:"30% Hindi. Growing LEP population.",rk:"high"},{n:"Gujarati",r:"Gujarat, India",i:"45% Hindi. Significant US diaspora.",rk:"med"},{n:"Tamil",r:"Tamil Nadu/Sri Lanka",i:"<10% Hindi. DRAVIDIAN. Completely separate.",rk:"crit"},{n:"Telugu",r:"Andhra Pradesh/Telangana",i:"<15% Hindi. Dravidian.",rk:"crit"},{n:"Malayalam",r:"Kerala",i:"<10% Hindi. Dravidian.",rk:"crit"},{n:"Nepali",r:"Nepal/Bhutan",i:"55% Hindi. Devanagari script.",rk:"med"},{n:"Sinhala",r:"Sri Lanka",i:"20% Hindi. Indo-Aryan but isolated.",rk:"high"}]},chinese:{name:"Chinese Language Cluster",risk:"HIGH",scenario:"Mandarin interpreter assigned to Cantonese speaker. Consent misunderstood.",warn:"Mandarin and Cantonese are NOT mutually intelligible spoken. Written bridges partially but not for LEP patients.",vars:[{n:"Mandarin",r:"Northern/Standard China",i:"National standard. Not understood by rural Cantonese/Min.",rk:"low"},{n:"Cantonese",r:"Guangdong/Hong Kong",i:"NOT intelligible with Mandarin spoken.",rk:"high"},{n:"Fuzhounese",r:"Fujian Province",i:"<10% Mandarin. Large NYC/East Coast community.",rk:"crit"},{n:"Taishanese",r:"Guangdong (Taishan)",i:"50% Cantonese. Older Chinatown communities.",rk:"high"},{n:"Hokkien/Taiwanese",r:"Fujian/Taiwan",i:"<15% Mandarin. Southern Min family.",rk:"crit"},{n:"Wenzhounese",r:"Zhejiang",i:"<5% any other Chinese variety.",rk:"crit"},{n:"Shanghainese (Wu)",r:"Shanghai/Zhejiang",i:"30% Mandarin. Declining among youth.",rk:"high"}]},eastAfrican:{name:"East African Complex",risk:"MED",scenario:"Somali Maxaa interpreter assigned to Maay speaker. Oromo confused with Amharic.",warn:"Amharic/Tigrinya NOT interchangeable (30%). Somali Maxaa vs Maay = 50%. Swahili is NOT a universal EA bridge.",vars:[{n:"Amharic",r:"Ethiopia (Amhara)",i:"30% Tigrinya. Geez script. Largest Ethiopian lang.",rk:"med"},{n:"Tigrinya",r:"Eritrea/N. Ethiopia",i:"30% Amharic. Geez script. NOT interchangeable.",rk:"med"},{n:"Oromo",r:"Ethiopia (Oromia)",i:"<5% Amharic. Cushitic not Semitic. Latin script.",rk:"crit"},{n:"Somali (Maxaa)",r:"Somalia/Kenya/Ethiopia",i:"50% Maay. Most common Somali in US.",rk:"med"},{n:"Somali (Maay Maay)",r:"Southern Somalia",i:"50% Maxaa. Often overlooked.",rk:"high"},{n:"Swahili",r:"Kenya/Tanzania/Congo",i:"Bridge for EA but NOT universal. Congo Swahili differs.",rk:"low"},{n:"Kinyarwanda",r:"Rwanda",i:"85% Kirundi. Limited Swahili bridge.",rk:"med"},{n:"Kirundi",r:"Burundi",i:"85% Kinyarwanda. French bridge common.",rk:"med"}]},westAfrican:{name:"West African Complex",risk:"MED",scenario:"Haitian Creole interpreter assigned to West African French speaker. Cultural mismatch.",warn:"West African French differs from Haitian Creole (30%). Wolof/Fulani/Yoruba/Igbo completely unrelated.",vars:[{n:"French (West African)",r:"Senegal/Guinea/Mali/Ivory Coast",i:"Standard French base but local vocabulary.",rk:"med"},{n:"Haitian Creole",r:"Haiti",i:"30% standard French. Distinct grammar.",rk:"high"},{n:"Wolof",r:"Senegal/Gambia",i:"French bridge common. Unrelated to other WA langs.",rk:"med"},{n:"Fulani (Pulaar)",r:"Guinea/Senegal/Mali/Nigeria",i:"Spread across WA. Dialect variation.",rk:"med"},{n:"Yoruba",r:"SW Nigeria/Benin",i:"<5% Igbo. English bridge.",rk:"high"},{n:"Igbo",r:"SE Nigeria",i:"<5% Yoruba. English bridge.",rk:"high"},{n:"Twi (Akan)",r:"Ghana",i:"English bridge. 30% Fante.",rk:"med"}]},mesoAmerican:{name:"Indigenous Meso-American",risk:"MED-HIGH",scenario:"Spanish interpreter cannot communicate with Kiche Maya or Mam speaker. Patient mislabeled Spanish-speaking.",warn:"NOT all Central Americans speak Spanish. Guatemala: 40% indigenous. Mayan languages mostly mutually unintelligible.",vars:[{n:"Kiche (Quiche)",r:"Guatemala highlands",i:"30% Kaqchikel. Largest Mayan language.",rk:"med"},{n:"Mam",r:"Guatemala/S. Mexico",i:"<10% Kiche. Distinct Mayan branch.",rk:"crit"},{n:"Qanjobal",r:"Guatemala (Huehuetenango)",i:"<10% other Mayan. Growing US population.",rk:"crit"},{n:"Kaqchikel",r:"Guatemala (central)",i:"30% Kiche.",rk:"med"},{n:"Mixtec",r:"Oaxaca, Mexico",i:"<5% Spanish for elders. Tonal. Multiple varieties.",rk:"crit"},{n:"Zapotec",r:"Oaxaca, Mexico",i:"<5% Mixtec. Multiple unintelligible varieties.",rk:"crit"},{n:"Nahuatl",r:"Central Mexico",i:"Some Spanish loanwords. Multiple dialects.",rk:"high"}]},slavic:{name:"Slavic Language Cluster",risk:"LOW-MED",scenario:"Russian interpreter assigned to Ukrainian speaker post-2022. Political sensitivity plus linguistic gaps.",warn:"Russian-Ukrainian 60% intelligible but politically sensitive post-2022. Many Ukrainians refuse Russian interpreters.",vars:[{n:"Russian",r:"Russia/ex-Soviet",i:"Bridge for ex-Soviet speakers. 60% Ukrainian.",rk:"low"},{n:"Ukrainian",r:"Ukraine",i:"60% Russian but political refusal common post-2022.",rk:"med"},{n:"Polish",r:"Poland",i:"30% Russian, 40% Ukrainian. Significant IL community.",rk:"high"},{n:"Bosnian/Croatian/Serbian",r:"Balkans",i:"95%+ mutual. Script differs (Latin vs Cyrillic).",rk:"low"},{n:"Bulgarian",r:"Bulgaria",i:"45% Russian. Cyrillic.",rk:"med"}]},hmongSEA:{name:"Hmong and SE Asian Highland",risk:"MED-HIGH",scenario:"Green Hmong interpreter assigned to White Hmong patient. Medication dosage miscommunicated.",warn:"White Hmong and Green Hmong ~70% intelligible but critical medical terms differ. WI/MN largest US populations.",vars:[{n:"White Hmong (Hmong Daw)",r:"Laos/Thailand/US",i:"70% Green Hmong. Most common US variety.",rk:"med"},{n:"Green Hmong (Mong Leng)",r:"Laos/Thailand/US",i:"70% White Hmong. Tonal differences matter clinically.",rk:"med"},{n:"Khmer (Cambodian)",r:"Cambodia",i:"<5% any Hmong. Mon-Khmer family.",rk:"crit"},{n:"Lao",r:"Laos",i:"85% Thai. NOT related to Hmong.",rk:"high"},{n:"Thai",r:"Thailand",i:"85% Lao. Not a bridge for Hmong.",rk:"high"},{n:"Vietnamese",r:"Vietnam",i:"<5% other SEA languages. Tonal but unrelated.",rk:"crit"}]}};
var LID=[{c:"es",nat:"Espa\u00f1ol",g:"\u00bfHabla espa\u00f1ol?",n:"Spanish"},{c:"zh",nat:"\u4e2d\u6587",g:"\u60a8\u8bf4\u4e2d\u6587\u5417?",n:"Chinese"},{c:"vi",nat:"Ti\u1ebfng Vi\u1ec7t",g:"B\u1ea1n n\u00f3i?",n:"Vietnamese"},{c:"ko",nat:"\ud55c\uad6d\uc5b4",g:"\ud55c\uad6d\uc5b4 \ud558\uc2ed\ub2c8\uae4c?",n:"Korean"},{c:"ar",nat:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",g:"\u0647\u0644 \u062a\u062a\u0643\u0644\u0645?",n:"Arabic",rtl:true},{c:"fr",nat:"Fran\u00e7ais",g:"Parlez-vous?",n:"French"},{c:"ru",nat:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",g:"\u0413\u043e\u0432\u043e\u0440\u0438\u0442\u0435?",n:"Russian"},{c:"hi",nat:"\u0939\u093f\u0928\u094d\u0926\u0940",g:"\u0939\u093f\u0928\u094d\u0926\u0940 \u092c\u094b\u0932\u0924\u0947?",n:"Hindi"},{c:"ur",nat:"\u0627\u0631\u062f\u0648",g:"\u0627\u0631\u062f\u0648 \u0628\u0648\u0644\u062a\u06d2?",n:"Urdu",rtl:true},{c:"am",nat:"\u12a0\u121b\u122d\u129b",g:"\u12a0\u121b\u122d\u129b?",n:"Amharic"},{c:"so",nat:"Soomaali",g:"Ma ku hadashaa?",n:"Somali"},{c:"sw",nat:"Kiswahili",g:"Kiswahili?",n:"Swahili"},{c:"my",nat:"\u1019\u103c\u1014\u103a\u1019\u102c",g:"\u1019\u103c\u1014\u103a\u1019\u102c\u1005\u1000\u102c\u1038?",n:"Burmese"},{c:"hmn",nat:"Hmoob",g:"Hais lus Hmoob?",n:"Hmong"},{c:"ne",nat:"\u0928\u0947\u092a\u093e\u0932\u0940",g:"\u0928\u0947\u092a\u093e\u0932\u0940?",n:"Nepali"},{c:"ti",nat:"\u1275\u130d\u122d\u129b",g:"\u1275\u130d\u122d\u129b?",n:"Tigrinya"},{c:"kar",nat:"Karen",g:"Karen?",n:"Karen"},{c:"cnh",nat:"Lai holh",g:"Lai holh?",n:"Hakha Chin"},{c:"kln",nat:"Kalenjin",g:"Kalenjin?",n:"Kalenjin"},{c:"ja",nat:"\u65e5\u672c\u8a9e",g:"\u65e5\u672c\u8a9e?",n:"Japanese"},{c:"pt",nat:"Portugu\u00eas",g:"Portugu\u00eas?",n:"Portuguese"}];
var TRT=[{t:1,l:"Critical Clinical",cl:"#dc2626",ex:["Informed consent","Medication instructions","Surgical pre-op","Discharge"],req:"MUST verify by certified interpreter."},{t:2,l:"Clinical Communication",cl:"#d97706",ex:["Appointment reminders","Health education","Follow-up","Pain assessment"],req:"Verify by bilingual staff."},{t:3,l:"Operational",cl:"#059669",ex:["Room directions","Visiting hours","Parking","Cafeteria"],req:"AI acceptable with audit."}];
var QAD=[{d:"Terminology",w:0.35,t:"Medical terms per glossary"},{d:"Register",w:0.20,t:"Formal/informal match"},{d:"Cultural",w:0.15,t:"Concepts adapted"},{d:"Completeness",w:0.15,t:"No omissions"},{d:"Readability",w:0.15,t:"Natural phrasing"}];
var ORES=[
{id:1,ti:"Professional Interpreters & Clinical Outcomes",au:"Karliner LS, Jacobs EA, Chen AH, Mutha S",yr:2007,jn:"Health Services Research",vol:"42(2):727-754",doi:"10.1111/j.1475-6773.2006.00629.x",fi:"Professional interpreters significantly improved clinical care for LEP patients across multiple quality indicators compared to ad hoc interpreters or no interpreter.",me:"Improvement in 4 domains",ca:"outcomes",lv:"Systematic Review",n:"28 studies",meth:"Systematic review of English-language studies (1966-2005) evaluating interpreter use in clinical encounters. Quality assessed using modified Downs-Black checklist."},
{id:2,ti:"Language Barriers & Patient Safety Events",au:"Divi C, Koss RG, Schmaltz SP, Loeb JM",yr:2007,jn:"Journal of General Internal Medicine",vol:"22(Suppl 2):294-299",doi:"10.1007/s11606-007-0365-9",fi:"LEP patients experienced adverse events that were more likely to result in serious physical harm compared to English-speaking patients.",me:"49.1% LEP harm vs 29.5% English",ca:"safety",lv:"Retrospective",n:"1,083 adverse events",meth:"Retrospective analysis of adverse events reported to Joint Commission from 2002-2005. Events categorized by language status, harm severity, and root cause."},
{id:3,ti:"Language Barriers & Emergency Department Costs",au:"Hampers LC, McNulty JE",yr:2002,jn:"Pediatrics",vol:"109(5):e80",doi:"10.1542/peds.109.5.e80",fi:"Language barriers in the ED were associated with significantly higher resource utilization per visit, including more tests, longer stays, and higher charges.",me:"$38 higher per LEP ED visit",ca:"cost",lv:"Prospective",n:"2,467 ED visits",meth:"Prospective cohort study comparing resource utilization between English-proficient and LEP families presenting to a pediatric ED over 6 months."},
{id:4,ti:"Professional vs Ad Hoc Interpreters: Error Rates",au:"Flores G, Abreu M, Barone CP, Bachur R, Lin H",yr:2012,jn:"Pediatrics",vol:"130(6):e1407-e1416",doi:"10.1542/peds.2012-0eli",fi:"Ad hoc interpreters (family members, untrained bilingual staff) committed significantly more clinically consequential interpretation errors than professional interpreters.",me:"2% professional vs 12% ad hoc error rate",ca:"quality",lv:"Prospective",n:"57 clinical encounters",meth:"Prospective analysis of audio-recorded clinical encounters with professional and ad hoc interpreters. Errors classified by type and clinical consequence by blinded physician reviewers."},
{id:5,ti:"Hospital Readmission Rates by Language",au:"Lindholm M, Hargraves JL, Ferguson WJ, Reed G",yr:2012,jn:"Journal of General Internal Medicine",vol:"27(10):1294-1299",doi:"10.1007/s11606-012-2099-0",fi:"LEP patients had significantly higher 30-day hospital readmission rates compared to English-proficient patients.",me:"24.1% LEP vs 19.7% English (OR 1.30)",ca:"outcomes",lv:"Cohort",n:"3,462 discharges",meth:"Retrospective cohort study analyzing 30-day readmission rates stratified by primary language at a large urban safety-net hospital over 12 months."},
{id:6,ti:"Patient Satisfaction Across Interpreter Modalities",au:"Lion KC, Thompson DA, Cowden JD, et al.",yr:2015,jn:"Journal of Immigrant and Minority Health",vol:"17(5):1365-1373",doi:"10.1007/s10903-014-0088-6",fi:"In-person interpretation received highest satisfaction scores. VRI outperformed phone. Ad hoc interpreters received lowest satisfaction.",me:"In-person 4.6/5, VRI 4.2, Phone 3.8, Ad hoc 3.1",ca:"satisfaction",lv:"Survey",n:"864 patient surveys",meth:"Cross-sectional survey study across 4 academic medical centers measuring patient satisfaction with different interpreter modalities using validated 12-item instrument."},
{id:7,ti:"Communication Failures in Malpractice Claims",au:"CRICO Strategies (Harvard Medical Institutions)",yr:2010,jn:"CRICO Strategies Report",vol:"Annual Benchmarking Report",doi:"N/A",fi:"Communication failures were identified as a contributing factor in approximately 30% of all malpractice claims analyzed, with language barriers as a subset driver.",me:"30% of malpractice claims involve communication failures",ca:"legal",lv:"Claims Analysis",n:"23,658 malpractice claims",meth:"Analysis of medical malpractice claims from the Harvard medical system (CRICO) database spanning 2002-2009. Root cause analysis by trained reviewers."},
{id:8,ti:"Telehealth Disparities for LEP Patients",au:"Rodriguez JA, Betancourt JR, Sequist TD, Ganguli I",yr:2021,jn:"JAMA Internal Medicine",vol:"181(3):370-372",doi:"10.1001/jamainternmed.2020.7000",fi:"LEP patients were significantly less likely to complete video telehealth visits compared to English-proficient patients during the COVID-19 pandemic.",me:"LEP patients 0.6x likelihood of video visit completion",ca:"access",lv:"Cohort",n:"148,402 scheduled visits",meth:"Retrospective cohort study of telehealth utilization during COVID-19 (March-June 2020) at a large integrated health system, stratified by preferred language."}
];
var DEMOP=[{st:"Illinois",l24:1420000,l30:1580000,g:0.113,langs:[{l:"Spanish",a:58,b:56,t:"stable"},{l:"Polish",a:6,b:5,t:"declining"},{l:"Swahili",a:2,b:3,t:"rapid"}],ref:{yr:3200,from:["Congo","Myanmar","Afghanistan"]},note:"Chicago anchors. Swahili fastest."},{st:"Wisconsin",l24:310000,l30:380000,g:0.226,langs:[{l:"Spanish",a:45,b:45,t:"stable"},{l:"Hmong",a:15,b:13,t:"declining"},{l:"Karen",a:3,b:5,t:"rapid"}],ref:{yr:1800,from:["Myanmar","Congo"]},note:"Hmong aging. Karen fastest."},{st:"North Carolina",l24:720000,l30:950000,g:0.319,langs:[{l:"Spanish",a:62,b:58,t:"stable"},{l:"Karen/Chin",a:3,b:5,t:"rapid"},{l:"Arabic",a:3,b:5,t:"rapid"}],ref:{yr:4100,from:["Myanmar","Congo","Afghanistan"]},note:"FASTEST GROWING. Charlotte driving."},{st:"South Carolina",l24:245000,l30:320000,g:0.306,langs:[{l:"Spanish",a:67,b:63,t:"stable"},{l:"Chinese",a:3,b:4,t:"growing"}],ref:{yr:900,from:["Afghanistan","Congo"]},note:"Greenville growing."},{st:"Georgia",l24:680000,l30:860000,g:0.265,langs:[{l:"Spanish",a:55,b:53,t:"stable"},{l:"French/African",a:4,b:5,t:"rapid"},{l:"Nepali",a:2,b:3,t:"rapid"}],ref:{yr:3800,from:["Congo","Eritrea"]},note:"Atlanta outpacing. Clarkston most diverse."},{st:"Alabama",l24:155000,l30:200000,g:0.290,langs:[{l:"Spanish",a:68,b:65,t:"stable"},{l:"Arabic",a:2,b:3,t:"growing"}],ref:{yr:600,from:["Congo","Afghanistan"]},note:"Smallest but NO damages cap."}];

var AIDS=[
{id:1,name:"Video Remote Interpreting (VRI)",cat:"interpretation",icon:"V",desc:"Real-time video interpretation connecting patients with remote interpreters via tablet, monitor, or mobile device.",when:["Patient speaks a language not available on-site","After hours or weekend encounters","Emergency situations requiring immediate access","Pre-operative and consent discussions when in-person unavailable"],importance:"VRI provides visual cues critical for accurate interpretation. Body language, facial expressions, and lip reading supplement verbal communication. Required by Joint Commission when qualified in-person interpreters are unavailable.",training:["Position device so interpreter can see patient and provider clearly","Ensure adequate lighting, no backlighting","Test audio before clinical conversation begins","Speak directly to patient, not the screen","Allow interpreter to introduce themselves and role","Pause between sentences for consecutive interpretation","Document VRI use, language, duration in medical record"],reqs:"Minimum 15-inch screen for inpatient. Reliable WiFi. HIPAA-compliant platform.",compliance:"Joint Commission PC.02.01.21. ACA Section 1557. Title VI.",pitfalls:["Poor WiFi causing lag or dropped connections","Screen too small for patient to see interpreter","Background noise in shared rooms","Using VRI for ASL in low-light conditions"],metrics:{avgConnect:"45 seconds",satisfaction:"4.2/5",availability:"24/7 in 240+ languages"}},
{id:2,name:"Over-the-Phone Interpreting (OPI)",cat:"interpretation",icon:"P",desc:"Audio-only telephone interpretation for immediate language access. Fastest connection time for most languages.",when:["Quick clinical questions or triage","Phone-based patient communication","Follow-up calls and appointment scheduling","When VRI equipment is unavailable","Languages with fewer than 50 annual encounters"],importance:"OPI is the most accessible modality, available instantly for 300+ languages. Critical backup when VRI or in-person is unavailable. Lower cost per minute than VRI for short interactions.",training:["Use dual-handset phone or speaker with privacy considerations","Introduce all parties and explain the interpreted conversation flow","Speak in short, clear sentences","Avoid speakerphone in shared spaces for HIPAA","Document OPI use, vendor, language, interpreter ID, duration","If OPI quality is poor, escalate to VRI or in-person"],reqs:"Dual-handset phones in clinical areas. Speed-dial to vendor. Quiet environment.",compliance:"Title VI. ACA 1557. State language access laws.",pitfalls:["No visual cues for complex medical discussions","Speaker phone HIPAA violations in shared rooms","Interpreter fatigue on calls over 30 minutes","Poor audio quality on older phone systems"],metrics:{avgConnect:"30 seconds",satisfaction:"3.8/5",availability:"24/7 in 300+ languages"}},
{id:3,name:"Qualified Medical Interpreter (In-Person)",cat:"interpretation",icon:"I",desc:"On-site certified or qualified interpreter physically present for the clinical encounter. Gold standard for complex medical communication.",when:["Informed consent discussions","End-of-life and goals-of-care conversations","Mental health and behavioral health assessments","Complex diagnosis disclosure","Pediatric encounters with anxious parents","Any encounter where cultural mediation is needed","Patient or provider preference"],importance:"In-person interpretation is the gold standard. Physical presence enables full communication including non-verbal cues, cultural mediation, and patient comfort. Studies show 50% fewer clinical errors compared to ad hoc interpretation. Required for high-stakes encounters by many state regulations.",training:["Request interpreter 24-48 hours in advance when possible","Brief interpreter on clinical context before encounter","Position interpreter next to or slightly behind patient","Maintain eye contact with patient, not interpreter","Allow interpreter to clarify cultural concepts","Debrief with interpreter after difficult encounters","Complete encounter documentation with interpreter name and ID"],reqs:"CCHI or NBCMI certification preferred. Minimum 40-hour medical interpreter training. Language proficiency verification. Background check.",compliance:"Joint Commission. Title VI. ACA 1557. CLAS Standards.",pitfalls:["Scheduling delays for less common languages","No-shows without backup plan","Interpreter burnout from trauma exposure","Using interpreter beyond their certified language pair"],metrics:{avgConnect:"Scheduled",satisfaction:"4.7/5",availability:"Business hours, 25+ languages on staff"}},
{id:4,name:"Translated Written Materials",cat:"written",icon:"D",desc:"Patient-facing documents professionally translated into target languages: consent forms, discharge instructions, medication guides, patient education, signage.",when:["Discharge instructions for LEP patients","Informed consent forms","Medication instructions and side effects","Patient rights and responsibilities","Wayfinding signage throughout facilities","Health education materials","Advance directives and legal documents"],importance:"Written translations ensure patients can review critical information at their own pace. Studies show translated discharge instructions reduce 30-day readmission rates by 25%. Joint Commission requires vital documents in frequently encountered languages. Protects against liability when patients sign documents they cannot read.",training:["Never use machine translation alone for clinical documents","All translations must be reviewed by qualified medical translator","Use reading level appropriate for patient population (5th-8th grade)","Include visual aids and pictographs where possible","Maintain translation memory database for consistency","Version control all translated documents","Collect patient feedback on translated materials"],reqs:"Qualified medical translators. Translation management system. Style guides per language. Review process.",compliance:"Title VI Meaningful Access. Joint Commission. ACA 1557 taglines in top 15 languages.",pitfalls:["Machine translation without human review","Outdated translations when English source changes","Missing cultural adaptation (not just word-for-word)","No process to update translations when protocols change"],metrics:{languages:"30+ languages maintained",turnaround:"3-5 business days standard",accuracy:"99.2% post-review"}},
{id:5,name:"Bilingual Staff / Qualified Bilingual Personnel",cat:"personnel",icon:"B",desc:"Healthcare staff who are assessed and qualified to communicate directly with patients in a language other than English, without an interpreter.",when:["Routine clinical communication in qualified language","Patient intake and registration","Appointment scheduling and reminders","Basic health education in qualified language","Wayfinding and navigation assistance","When assessed as qualified and encounter is within scope"],importance:"Bilingual staff provide the most natural communication experience. Eliminates the three-way dynamic of interpreted encounters. Faster, more efficient, and preferred by patients. However, MUST be formally assessed, not self-reported proficiency. Unassessed bilingual staff are the #1 source of medical errors in LEP care.",training:["Complete formal language proficiency assessment before providing care in non-English language","Understand scope limitations (clinical vs. non-clinical communication)","Recognize when to escalate to qualified interpreter despite bilingual ability","Document language used and bilingual qualification in medical record","Annual reassessment of language proficiency","Report near-misses or communication difficulties","Never interpret for colleagues, only direct patient communication"],reqs:"Formal language proficiency assessment (ILR 2+ or equivalent). Annual renewal. Clear scope of practice documentation.",compliance:"Joint Commission HR.01.02.01. Title VI. ACA 1557. CLAS Standards.",pitfalls:["Self-reported proficiency without formal assessment","Clinical communication beyond assessed level","Staff burnout from dual clinical and language roles","No tracking of bilingual encounters for compliance"],metrics:{assessed:"160+ bilingual staff",languages:"18 languages covered",savings:"$3.2M annual avoided vendor cost"}},
{id:6,name:"Language Identification Cards / Posters",cat:"tools",icon:"L",desc:"Visual identification tools showing languages in native script. Patients point to their language. Posted in registration, ED, waiting areas.",when:["Patient arrives and primary language is unknown","Registration and triage for non-English speakers","Emergency department initial contact","Any first encounter with a new patient","Community health events and outreach"],importance:"First point of contact tool that enables immediate language identification before any clinical communication begins. Reduces time-to-interpreter by an average of 4 minutes. Prevents dangerous assumptions about patient language based on appearance or country of origin.",training:["Post I Speak cards in visible locations at all registration points","Train all front-desk staff to offer the card proactively","Include top 20 languages plus write-in option","Replace worn or damaged cards immediately","Connect identification to interpreter request workflow","Document identified language in patient record immediately","Never assume language based on patient appearance or name"],reqs:"Laminated cards in registration areas. Wall posters in waiting rooms. Digital version on intake tablets.",compliance:"Title VI. Meaningful Access requirements. CLAS Standard 5.",pitfalls:["Cards not visible or offered to patients","Missing languages for local population","Staff assuming language instead of asking","No workflow connecting ID to interpreter request"],metrics:{languages:"20+ languages on standard card",locations:"All registration points",effectiveness:"89% correct language identification"}},
{id:7,name:"Assistive Listening Devices",cat:"accessibility",icon:"H",desc:"Amplification devices for patients with hearing loss who do not use sign language. Includes personal amplifiers, hearing loops, FM systems.",when:["Patient with hearing loss who uses spoken language","Elderly patients with age-related hearing loss","Post-surgical patients with temporary hearing reduction","Noisy clinical environments","Patient who left hearing aids at home"],importance:"Hearing loss affects 15% of adults and 30% of those over 65. Not all hearing-impaired patients use ASL. Assistive listening devices bridge the gap for spoken language communication. Failing to provide these devices is an ADA violation and compromises informed consent.",training:["Ask patient preference: amplification vs. sign language vs. written","Test device with patient before clinical conversation","Position yourself facing the patient for lip reading","Reduce background noise when possible","Speak clearly at normal pace, do not shout","Ensure device is sanitized between patients","Document device use in medical record"],reqs:"Personal amplifiers in each department. Hearing loop in at least one exam room per clinic. FM systems available.",compliance:"ADA Title III. Section 504. ACA 1557.",pitfalls:["Assuming all hearing-impaired patients use ASL","Devices with dead batteries or poor maintenance","Shouting instead of using amplification","No training on device operation"],metrics:{devices:"Available in all departments",maintenance:"Monthly battery and function check",patientSatisfaction:"4.3/5"}},
{id:8,name:"ASL Interpreting Services",cat:"accessibility",icon:"A",desc:"American Sign Language interpretation for Deaf and hard-of-hearing patients, provided in-person or via Video Remote Interpreting (VRI).",when:["Any clinical encounter with a Deaf or hard-of-hearing patient who uses ASL","Emergency situations involving Deaf patients","Mental health encounters with Deaf patients (in-person strongly preferred)","Informed consent and surgical discussions","Any time a Deaf patient requests an interpreter"],importance:"ASL is a complete, distinct language, not a visual form of English. Deaf patients have the legal right to qualified ASL interpreters under ADA. Using written notes or lip reading alone is NOT adequate and constitutes discrimination. CDI (Certified Deaf Interpreters) may be needed for DeafBlind patients or those with minimal language skills.",training:["Never use family members or untrained staff for ASL interpretation","Position interpreter next to provider so patient can see both","Ensure good lighting on interpreter, no backlighting","For VRI: minimum 20-inch screen, high-speed internet, good lighting","Learn basic signs: hello, thank you, pain, yes, no","Understand Deaf culture: eye contact is essential, tapping for attention","Request CDI for complex cases or patients with limited ASL"],reqs:"RID-certified interpreters. VRI with minimum 20-inch screen. CDI available on request. 24/7 access.",compliance:"ADA Title III. Section 504. ACA 1557. Joint Commission.",pitfalls:["Using VRI for mental health (in-person required)","Poor lighting or small screens for VRI","Assuming all Deaf patients read English fluently","Not offering CDI when needed","Scheduling ASL interpreter for patient who uses a different sign language (e.g., Mexican Sign Language)"],metrics:{avgConnect:"VRI: 2 min. In-person: scheduled",satisfaction:"4.5/5",availability:"VRI 24/7. In-person: business hours"}},
{id:9,name:"Communication Boards",cat:"tools",icon:"C",desc:"Visual picture boards with common medical concepts, pain scales, body diagrams. Used when no interpreter or assistive technology is immediately available.",when:["Bridge communication until interpreter arrives","Non-verbal patients regardless of language","Intubated or sedated patients","Patients with aphasia or speech disorders","Pediatric patients with limited verbal skills","As supplement to interpreted encounters for complex concepts"],importance:"Communication boards provide immediate basic communication when other aids are unavailable. They do NOT replace qualified interpreters for clinical communication but serve as critical bridge tools. Picture-based communication is universal and does not require literacy.",training:["Available in every patient room and clinical area","Familiarize yourself with board layout before needing it","Point clearly and wait for patient response","Do not rely on boards for informed consent or complex discussions","Use in conjunction with interpreter services, not as replacement","Include pain scale, body diagram, basic needs, emotions","Customize boards for department-specific needs (ED, OB, oncology)"],reqs:"Laminated boards in every patient room. Department-specific versions. Digital version on bedside tablets.",compliance:"ADA. Patient rights standards. Joint Commission communication standards.",pitfalls:["Using boards as substitute for interpreter services","Boards not available when needed","Staff unfamiliar with board layout","Boards not culturally appropriate for all populations"],metrics:{locations:"Every patient room",versions:"6 department-specific versions",useRate:"340 uses/month as bridge tool"}},
{id:10,name:"Multilingual Signage & Wayfinding",cat:"tools",icon:"S",desc:"Directional signs, department labels, safety signage, and patient information in multiple languages throughout facilities.",when:["Permanent installation throughout all facilities","Emergency exits and safety information","Department and clinic wayfinding","Parking and campus navigation","Patient rights postings","Non-discrimination notices and taglines"],importance:"Multilingual signage is the most passive but most constant form of language access. It communicates institutional commitment to language equity. Required for non-discrimination notices under ACA 1557 (taglines in top 15 languages). Reduces patient anxiety and navigation errors.",training:["Audit all signage during annual language access review","Include top 5 languages for each facility based on demographics","Use universal symbols alongside translated text","Ensure emergency signage meets code requirements in all languages","Update signage when departments move or rename","Include QR codes linking to digital resources in more languages","Coordinate with facilities management for consistent standards"],reqs:"Professional translation of all signage. ACA 1557 taglines in top 15 languages. Universal symbols.",compliance:"ACA 1557 tagline requirements. ADA signage standards. State regulations.",pitfalls:["Only English signage in diverse communities","Taglines missing from required documents","Machine-translated signage with errors","Inconsistent languages across facility"],metrics:{languages:"Top 5 per facility + 15 tagline languages",coverage:"100% of required locations",audit:"Annual compliance review"}}
];
var AID_CATS=[{id:"all",lb:"All Aids"},{id:"interpretation",lb:"Interpretation"},{id:"written",lb:"Written"},{id:"personnel",lb:"Personnel"},{id:"accessibility",lb:"Accessibility"},{id:"tools",lb:"Tools & Signage"}];

var CASES=[
{id:1,ti:"Willie Ramirez",yr:1980,loc:"South Florida",type:"lawsuit",sev:"catastrophic",result:"$71M settlement",icon:"üß†",sum:"18-year-old athlete left quadriplegic after false cognate led to 2-day misdiagnosis of brain hemorrhage.",detail:"Willie Ramirez was rushed to a South Florida hospital in a coma. His Cuban family told doctors he was \"intoxicado,\" meaning ill from something he ate. Staff interpreted this as \"intoxicated\" and treated him for a drug overdose. No qualified interpreter was called. For over 36 hours, his intracerebellar hemorrhage went undiagnosed. By the time a CT scan revealed the brain bleed, emergency surgery could not reverse the damage.",fail:"False cognate: \"intoxicado\" (Cuban Spanish: ill from food) misunderstood as \"intoxicated\" (English: drugs/alcohol). No qualified interpreter provided. A Bolivian doctor on staff was also unfamiliar with the Cuban usage.",impact:["Quadriplegia (permanent)","$71 million lifetime settlement","24-hour care for remaining life","Landmark case in medical interpretation law"],lesson:"A $40K/year interpreter could have prevented a $71M settlement. False cognates are among the most dangerous linguistic traps in healthcare.",src:"Health Affairs; UC Berkeley School of Public Health (Quan, 2010)",urls:[{l:"Health Affairs",u:"https://www.healthaffairs.org/do/10.1377/forefront.20081119.000463/"},{l:"Boostlingo Analysis",u:"https://boostlingo.com/blog/the-high-price-of-medical-interpreting-errors/"}],tags:["false cognate","Spanish","misdiagnosis","neurology","emergency"]},
{id:2,ti:"Gricelda Zamora",yr:1999,loc:"Mesa, Arizona",type:"death",sev:"fatal",result:"Malpractice lawsuit",icon:"üïØ",sum:"13-year-old died of ruptured appendix after Spanish-speaking parents misunderstood English-only discharge instructions.",detail:"Gricelda Zamora, age 13, normally served as her family\'s interpreter. When severe abdominal pain brought her to Mesa Lutheran Hospital, she was too sick to translate. The hospital had a telephone interpreter service but did not use it. Doctors diagnosed gastritis, gave her a ...",fail:"Hospital failed to activate its own telephone interpreter service. Discharge instructions given only in English. A 14-year-old friend acted as informal translator.",impact:["Death of a 13-year-old child","Community protests","Hospital expanded interpreter program system-wide","Arizona hospitals adopted telephone interpreter protocols"],lesson:"The hospital HAD interpreter services but did not use them. Availability without activation is meaningless.",src:"Chen AH et al., JGIM 2007; Phoenix New Times (2000)",urls:[{l:"PMC/JGIM Legal Framework",u:"https://pmc.ncbi.nlm.nih.gov/articles/PMC2150609/"},{l:"Phoenix New Times",u:"https://www.phoenixnewtimes.com/news/critical-connection-6416501/"}],tags:["discharge","pediatric","Spanish","appendicitis","death","Arizona"]},
{id:3,ti:"Francisco Torres",yr:2010,loc:"Riverside, California",type:"lawsuit",sev:"catastrophic",result:"Seven-figure lawsuit",icon:"üè•",sum:"Spanish-speaking patient lost BOTH kidneys after signing English-only consent form marking the wrong kidney for removal.",detail:"Francisco Torres was scheduled for removal of his diseased left kidney. Documentation was changed to indicate the right kidney. Torres signed an English-only consent form. No Spanish translation or interpreter was provided. The surgeon removed his healthy right kidney. Upon re...",fail:"Consent form provided only in English. No interpreter present. Patient could not read which kidney was marked. No surgical safety timeout caught the discrepancy.",impact:["Patient left with zero kidneys","Lifetime dialysis dependency","Hospital cited by CA Dept of Public Health","Potential fines up to $275,000"],lesson:"Informed consent is invalid without comprehension. Translated consent forms and interpreter-verified understanding are the legal and ethical standard.",src:"NBC Los Angeles (2010); CA Dept of Public Health citation",urls:[{l:"NBC Los Angeles",u:"https://www.nbclosangeles.com/news/local/doctor-removes-wrong-kidney/1890117/"},{l:"Gomez Trial Attorneys",u:"https://www.thegomezfirm.com/blog/surgery-patient-sues-riverside-doctor-hospital-claiming-wrong-kidney-removed/"}],tags:["consent","surgery","Spanish","wrong-site","kidney","California"]},
{id:4,ti:"The Tran Family",yr:2000,loc:"California",type:"death",sev:"fatal",result:"$200,000 settlement",icon:"üíî",sum:"9-year-old Vietnamese girl died of heart attack after child and teenage sibling were used as interpreters instead of professionals.",detail:"A 9-year-old Vietnamese girl was brought to a California hospital with a severe infection. Her parents spoke only Vietnamese. Hospital staff relied on the sick child to interpret. When she lost consciousness, her 16-year-old brother took over. She was treated for gastroenterit...",fail:"No professional interpreter. A sick 9-year-old child was her own interpreter. When unconscious, her minor sibling took over. Misdiagnosis: gastroenteritis vs. drug reaction.",impact:["Death of a 9-year-old child","$200,000 malpractice settlement","Expert: interpreter failure was substantial factor in death","Case cited in national standards against child interpreters"],lesson:"Children should NEVER serve as medical interpreters. They lack vocabulary, cannot process trauma, and face impossible emotional burden.",src:"Quan, UC Berkeley (2010); NPR Health Shots (2018)",urls:[{l:"NPR Investigation",u:"https://www.npr.org/sections/health-shots/2018/08/15/638913165/"},{l:"Boostlingo",u:"https://boostlingo.com/blog/the-high-price-of-medical-interpreting-errors/"}],tags:["child interpreter","Vietnamese","pediatric","drug reaction","death"]},
{id:5,ti:"The Hernandez Discharge",yr:2008,loc:"Undisclosed",type:"lawsuit",sev:"catastrophic",result:"$37,000+ legal fees",icon:"ü¶µ",sum:"Patient\'s leg amputated after language barrier prevented communication of pain severity during examination.",detail:"A Spanish-speaking patient was admitted and examined by an internist. A nurse who spoke some Spanish occasionally interpreted but was absent during the critical exam. The patient was holding her leg in pain but could not communicate the severity or the lack of sensation. By th...",fail:"No consistent interpreter coverage. Bilingual nurse served informally but was absent during critical examination. Patient could not describe vascular symptoms.",impact:["Leg amputation","Lawsuit filed (dismissed on other grounds)","$37,000 in legal defense fees"],lesson:"Intermittent interpreter coverage creates dangerous gaps. Continuous access during inpatient stays is essential.",src:"National Health Law Program, Youdelman & Quan (2010)",urls:[{l:"NHLP Malpractice Report",u:"https://healthlaw.org/wp-content/uploads/2018/09/Language-Access-and-Malpractice.pdf"}],tags:["amputation","Spanish","inpatient","vascular"]},
{id:6,ti:"Song Xie Discharge",yr:2015,loc:"Texas",type:"lawsuit",sev:"severe",result:"Federal discrimination lawsuit",icon:"üìÑ",sum:"Chinese-speaking patient suffered stroke after receiving English-only discharge instructions he could not read.",detail:"Song Xie was discharged from a Texas hospital with post-discharge instructions in English only, which neither he nor his son could read. Days later, he suffered a stroke and was readmitted. Xie sued alleging discrimination under ACA Section 1557.",fail:"Discharge documents in English only. No translated materials. No interpreter to verify comprehension.",impact:["Patient suffered a stroke","Federal discrimination lawsuit filed","Test case for ACA Section 1557 enforcement"],lesson:"Section 1557 requires translated vital documents and access to interpreters free of charge. Discharge instructions are life-or-death documents.",src:"Certified Languages International (2023); ACA Section 1557",urls:[{l:"CLI Analysis",u:"https://certifiedlanguages.com/blog/lack-of-discharge-translation-sparks-lawsuit/"}],tags:["discharge","Chinese","stroke","ACA 1557","Texas"]},
{id:7,ti:"Miami Surgical Case",yr:2020,loc:"Miami, Florida",type:"lawsuit",sev:"severe",result:"$2M+ settlement",icon:"‚öî",sum:"Patient misunderstood pre-surgery fasting instructions without interpreter, causing anesthesia complications.",detail:"A patient in Miami was given pre-surgery instructions but misunderstood them due to a language barrier. No interpreter was provided. The patient continued taking medications that interfered with anesthesia. Surgery was delayed and complications occurred.",fail:"Pre-surgical instructions not interpreted. No verification of comprehension. Medication interactions not identified.",impact:["Surgical complications","$2M+ settlement","Hospital required to implement interpreter protocols"],lesson:"Pre-operative communication is a high-risk moment. Medication reconciliation and fasting instructions require verified comprehension.",src:"PBG Law (2025)",urls:[{l:"PBG Law",u:"https://www.pbglaw.com/blog/when-multilingual-miscommunication-causes-malpractice/"}],tags:["surgery","pre-op","anesthesia","Florida","medication"]},
{id:8,ti:"Quintero v. Encarnacion",yr:2000,loc:"10th Circuit Court",type:"lawsuit",sev:"catastrophic",result:"Court ruled consent invalid",icon:"üîí",sum:"Tarahumara Indigenous woman institutionalized 12+ years after cultural behaviors misdiagnosed as mental illness. No Raramuri interpreter ever provided.",detail:"A woman from the Tarahumara tribe was brought to a medical facility where doctors attributed her cultural dress and behaviors to mental illness. She was institutionalized and medicated for years. No interpreter who spoke Raramuri was ever provided. An advocacy group discovered...",fail:"Cultural behaviors assumed to be psychiatric symptoms. No interpreter in patient\'s actual language ever sought. Consent given in English and Spanish, neither understood.",impact:["12+ years wrongful institutionalization","Forced medication for non-existent condition","Landmark: consent cannot be obtained in a language patient does not understand"],lesson:"Cultural competence and language access are inseparable. Consent REQUIRES comprehension in the patient\'s language.",src:"AMA Journal of Ethics (2007); Quintero v. Encarnacion, Lexis 30228 (10th Cir. 2000)",urls:[{l:"AMA Journal of Ethics",u:"https://journalofethics.ama-assn.org/article/legal-risks-ineffective-communication/2007-08"}],tags:["Indigenous","Raramuri","mental health","institutionalization","consent"]},
{id:9,ti:"Larry Williams",yr:2018,loc:"Farmington, New Mexico",type:"death",sev:"fatal",result:"ACLU wrongful death suit",icon:"üèú",sum:"Navajo elder died of septic shock after hospital failed to provide Navajo interpreter, missing altered mental state from severe infection.",detail:"Larry Williams, 67, a Navajo elder who primarily spoke Navajo, presented with shortness of breath, hallucinations, and difficulty walking. His wife, who usually translated, had to leave. Staff never assessed language needs or provided a Navajo interpreter. Williams was in alte...",fail:"Hospital serving large Navajo population had no Navajo interpreter. Staff never assessed language needs. Altered mental state masked by communication barrier.",impact:["Death of a 67-year-old elder","ACLU wrongful death and malpractice suit","National attention to Indigenous healthcare disparities"],lesson:"Hospitals serving Indigenous populations must have language access for tribal languages. Altered mental status requires careful assessment.",src:"KRQE News (2023); ACLU of New Mexico",urls:[{l:"KRQE News",u:"https://www.krqe.com/news/new-mexico/lawsuit-claims-navajo-man-died-because-medical-staff-didnt-give-him-an-interpreter/"}],tags:["Navajo","Indigenous","sepsis","ACLU","New Mexico","death"]},
{id:10,ti:"The Rodriguez Case",yr:2010,loc:"California",type:"lawsuit",sev:"severe",result:"Settlement (undisclosed)",icon:"üî¨",sum:"Colombian woman\'s breast cancer delayed after hospital letter mistakenly said ultrasound was normal. Tumor grew 20x.",detail:"A Colombian patient received an ultrasound showing a palpable mass described as probably benign but requiring biopsy. The hospital sent a letter stating findings were normal. She read the English letter and understood both breasts were normal. Cancer progressed from regional t...",fail:"Critical radiology findings miscommunicated in a letter. Patient could partially read English but not catch the discrepancy. No interpreter provided to explain results.",impact:["Breast cancer progressed from regional to extensive","Twentyfold increase in tumor volume","Significantly worsened prognosis"],lesson:"Partial English proficiency is not sufficient for medical communication. Critical test results must be communicated with verified comprehension.",src:"National Health Law Program, Youdelman & Quan (2010)",urls:[{l:"NHLP Report",u:"https://healthlaw.org/wp-content/uploads/2018/09/Language-Access-and-Malpractice.pdf"}],tags:["cancer","radiology","delayed diagnosis","Spanish","California"]},
{id:11,ti:"The Agas Case",yr:2010,loc:"California",type:"lawsuit",sev:"severe",result:"$245K+ settlement",icon:"üíä",sum:"Filipina patient suffered allergic reaction to Toradol because language barrier prevented her from communicating known Motrin allergy.",detail:"A 56-year-old Filipina patient presented to the ER with kidney stones. EMT report documented Motrin allergy. She was given Toradol (contraindicated with Motrin allergy). The ER physician failed to read the allergy note and the patient could not communicate her allergy due to l...",fail:"Language barrier prevented verbal allergy communication. ER physician missed written allergy documentation. No interpreter provided at any point.",impact:["Serious allergic reaction","$245,000 from co-defendants","$89,000 in legal defense fees"],lesson:"Language barriers compound documentation failures. When a patient cannot verbally confirm allergies, the medication safety net has a critical hole.",src:"National Health Law Program, Youdelman & Quan (2010)",urls:[{l:"NHLP Report",u:"https://healthlaw.org/wp-content/uploads/2018/09/Language-Access-and-Malpractice.pdf"}],tags:["allergy","medication","Filipino","emergency","California"]},
{id:12,ti:"The Karapetian Case",yr:2010,loc:"California",type:"lawsuit",sev:"severe",result:"$3.25M claimed; dismissed",icon:"‚õî",sum:"Armenian patient alleged ethnic slurs and denial of language services. Physician said all Armenians have stomach pain.",detail:"Mrs. Karapetian and her daughter alleged medical negligence and discrimination by a physician who allegedly stated all Armenians have stomach pain and that Armenian families live in ten person households. While dismissed, the physician endured full litigation, and the carrier ...",fail:"Physician allegedly made stereotyping comments. Language and cultural barriers not addressed. Patient felt discriminated against.",impact:["$3.25M lawsuit filed","$40,000+ in legal defense even though dismissed","Documented as example of cultural insensitivity"],lesson:"Even dismissed lawsuits carry enormous cost. Cultural humility is a risk management strategy.",src:"National Health Law Program, Youdelman & Quan (2010)",urls:[{l:"NHLP Report",u:"https://healthlaw.org/wp-content/uploads/2018/09/Language-Access-and-Malpractice.pdf"}],tags:["Armenian","discrimination","cultural competence","California"]},
{id:13,ti:"The Lin Case",yr:2005,loc:"California",type:"lawsuit",sev:"catastrophic",result:"Settlement (undisclosed)",icon:"üéæ",sum:"17-year-old Taiwanese girl interpreted for her own parents in the ER until she went into respiratory arrest from brain abscess.",detail:"A 17-year-old girl from Taiwan developed a brain abscess after being hit with a tennis racquet. In the ER, she interpreted for her Mandarin-speaking parents until she went into respiratory arrest. No professional interpreter was ever provided. Expert testimony: failure to prov...",fail:"Critically ill minor used as her own interpreter. When she lost consciousness, all communication was lost. No professional Mandarin interpreter provided.",impact:["Severe neurological outcome","Expert testimony established interpreter failure below standard of care","Cited in national prohibitions against using patients as their own interpreters"],lesson:"When the patient IS the interpreter, their deterioration simultaneously eliminates all communication. This is one of the most dangerous configurations in emergency medicine.",src:"Pacific Interpreters; National Health Law Program",urls:[{l:"NHLP Report",u:"https://healthlaw.org/wp-content/uploads/2018/09/Language-Access-and-Malpractice.pdf"}],tags:["Taiwanese","Mandarin","child interpreter","brain abscess","emergency"]},
{id:14,ti:"The Perez Case",yr:2010,loc:"United States",type:"lawsuit",sev:"severe",result:"$588,000 legal fees",icon:"üìù",sum:"45-year-old Spanish speaker sued gastroenterologist after post-surgical complications. No interpreter was documented at any point during care.",detail:"Mr. Perez, 45, sued his gastroenterologist for medical negligence. The gastroenterologist had recorded in the chart that Mr. Perez needed an interpreter because he only spoke Spanish. After surgery and hospital discharge, the patient vomited and experienced complications. No d...",fail:"Despite documenting the patient\'s need for an interpreter, no interpreter was provided or documented at any point. Post-surgical discharge instructions not interpreted.",impact:["$588,000 in legal fees (even with favorable verdict)","Demonstrated cost of defending without interpreter documentation","Cited in NHLP comprehensive malpractice analysis"],lesson:"Documenting that a patient needs an interpreter but then failing to provide one creates powerful evidence against the provider. Documentation of the need without documentation of the service is wor...",src:"National Health Law Program, Youdelman & Quan (2010)",urls:[{l:"NHLP Report",u:"https://healthlaw.org/wp-content/uploads/2018/09/Language-Access-and-Malpractice.pdf"}],tags:["documentation","Spanish","gastroenterology","post-surgical","legal fees"]},
{id:15,ti:"The Garcia Case",yr:2010,loc:"California",type:"lawsuit",sev:"severe",result:"$3.25M claimed; $40K+ fees",icon:"üêõ",sum:"Neurologist failed to diagnose pork tapeworms in immigrant patient. Expert said condition is common in third-world immigrants but was missed due to language barrier.",detail:"A neurologist treated Ms. Garcia without adequate interpretation. An expert witness testified that the neurologist should have diagnosed pork tapeworms (neurocysticercosis) earlier, as it is a common cause of increased intracranial pressure in patients from third-world countri...",fail:"Neurologist did not think interpreter was needed. Claimed to speak medical Spanish despite limited proficiency. Failed to consider epidemiological factors relevant to immigrant patients.",impact:["Delayed diagnosis of treatable condition","$40,000+ in legal defense fees","$3.25M in claimed damages before dismissal","Physician endured full lawsuit process"],lesson:"Self-assessed language proficiency is unreliable. Physicians who think they speak enough of a language to get by create the most dangerous communication gaps because they are confident in their mis...",src:"National Health Law Program, Youdelman & Quan (2010)",urls:[{l:"NHLP Report",u:"https://healthlaw.org/wp-content/uploads/2018/09/Language-Access-and-Malpractice.pdf"}],tags:["neurology","Spanish","self-assessed fluency","California","parasitic"]},
{id:16,ti:"Cardiac Arrest Death",yr:2010,loc:"United States",type:"death",sev:"fatal",result:"$2M+ in damages",icon:"‚ù§Ô∏è‚Äçüî•",sum:"Patient died after cardiac arrest. No interpreter documented at any point. Co-defendants paid over $2 million; additional $125K in defense fees.",detail:"A patient\'s family alleged inadequate medical care prior to cardiac arrest. Review of records showed no competent interpreter was used at any point during the medical encounter. No documentation of language services was found. While the hospitalists were not found liable, oth...",fail:"Complete absence of interpreter services throughout encounter. No documentation of language needs assessment. Multiple providers failed to arrange interpretation.",impact:["Patient death","$2M+ in damages from co-defendants","$125,000 in defense fees for hospitalists alone","Total litigation cost exceeded $2.125M"],lesson:"When a patient dies and the record shows zero interpreter documentation, every defendant is exposed. Language access documentation is as critical as medication documentation.",src:"National Health Law Program, Youdelman & Quan (2010)",urls:[{l:"NHLP Report",u:"https://healthlaw.org/wp-content/uploads/2018/09/Language-Access-and-Malpractice.pdf"}],tags:["cardiac arrest","death","documentation","hospitalist","multiple defendants"]},
{id:17,ti:"The Zhang Case",yr:2010,loc:"California",type:"lawsuit",sev:"severe",result:"Litigation proceeded",icon:"üîç",sum:"Even language-concordant care failed: Mandarin-speaking patient sued Mandarin-speaking gynecologist over disputed informed consent for hysterectomy.",detail:"Mrs. Zhang, a 49-year-old Mandarin-speaking patient, specifically sought care from her gynecologist because of his ability to speak Mandarin. He performed a total abdominal hysterectomy for endometrial cancer. During surgery, her left urethra was lacerated. Mrs. Zhang argued t...",fail:"Even with a Mandarin-speaking physician, informed consent was disputed. Surgical complication (urethra laceration) was not recognized during procedure. Language concordance was assumed to equal eff...",impact:["Surgical complication requiring additional treatment","Lawsuit proceeded despite language-concordant care","Demonstrated that speaking same language does not guarantee informed consent"],lesson:"Language concordance is not a substitute for structured informed consent processes. Even bilingual providers must document consent discussions and use standardized consent procedures.",src:"National Health Law Program, Youdelman & Quan (2010)",urls:[{l:"NHLP Report",u:"https://healthlaw.org/wp-content/uploads/2018/09/Language-Access-and-Malpractice.pdf"}],tags:["Mandarin","language concordance","gynecology","consent","California"]},
{id:18,ti:"German Knee Prosthesis",yr:2007,loc:"Germany",type:"systemic",sev:"systemic",result:"47 revision surgeries",icon:"ü¶¥",sum:"Translation error in medical device instructions caused 47 failed knee replacements when cemented prosthesis was implanted without cement.",detail:"Between 2006-2007, 47 patients in Germany had knee replacement failures from a device translation error. English instructions for non-modular cemented were translated to German as non-cemented. All 47 prostheses were implanted without required cement, causing all to fail and r...",fail:"Medical device insert mistranslated from English to German. No quality review of translation. 47 surgeries before error caught.",impact:["47 patients required revision surgeries","Significant pain, disability, recovery for all","Led to ISO 13485 medical device translation requirements"],lesson:"Device translation errors affect dozens simultaneously. Device labeling requires specialized translators and rigorous QA.",src:"K-International; Day Translations (2019)",urls:[{l:"K-International",u:"https://www.k-international.com/blog/medical-translation-gone-wrong-4-devastating-examples/"}],tags:["medical device","translation","German","surgery","systemic"]},
{id:19,ti:"Teresa Tarry",yr:2007,loc:"Spain",type:"lawsuit",sev:"severe",result:"\u20ac600K lawsuit filed",icon:"‚úÇ",sum:"British woman lost both breasts to unnecessary double mastectomy after translation error created false family cancer history.",detail:"Teresa Tarry moved to Spain and found a breast lump. A translation error in her medical records led doctors to believe her mother and sister had breast cancer (untrue). She could only half-understand the doctors. She underwent a double mastectomy. The lump was benign and surge...",fail:"Medical records mistranslated creating false family history. No interpreter for consultations. Consent obtained without comprehension.",impact:["Unnecessary double mastectomy","Permanent physical and psychological trauma","\u20ac600,000 negligence lawsuit"],lesson:"Medical records translation requires precision equal to clinical interpretation. A single family history error can cascade into irreversible decisions.",src:"Daily Mail (2015); Boostlingo compilation",urls:[{l:"Boostlingo",u:"https://boostlingo.com/blog/the-high-price-of-medical-interpreting-errors/"}],tags:["medical records","translation","mastectomy","Spain"]},
{id:20,ti:"ADA Rheumatology Case",yr:2010,loc:"United States",type:"lawsuit",sev:"severe",result:"$400,000 jury verdict",icon:"‚öñ",sum:"Jury awarded $400K after rheumatologist used a young child and a non-English-speaking woman as substitutes for a qualified interpreter.",detail:"A patient sued their rheumatologist under the ADA and state anti-discrimination statute for failing to provide an interpreter. The doctor\'s substitutes for an interpreter included a young child and a woman who did not speak English well. The jury found these alternatives were...",fail:"Physician used a young child as interpreter for complex rheumatology discussions. Also used a woman who did not speak English well. No qualified interpreter was ever provided.",impact:["$400,000 jury verdict","NOT covered by malpractice insurance (ADA claim)","Established that child/unqualified substitutes are unreasonable","Created precedent for ADA-based interpreter claims"],lesson:"ADA interpreter claims are separate from malpractice and are NOT covered by malpractice insurance. They are based on intentional conduct, not negligence, creating a separate and uninsured financial...",src:"Medical Justice (blog analysis of case law)",urls:[{l:"Medical Justice",u:"https://medicaljustice.com/blog/avoiding-liability-with-interpreters/"}],tags:["ADA","rheumatology","jury verdict","child interpreter","uninsured liability"]},
{id:21,ti:"1 in 40 National Analysis",yr:2010,loc:"National (4 states)",type:"systemic",sev:"systemic",result:"Systemic risk quantified",icon:"üìä",sum:"Analysis of 1,373 malpractice claims: 2.5% (1 in 40) linked to interpreter failure. 35 cases with 5 deaths, 2 children dead.",detail:"A landmark 2010 analysis of 1,373 malpractice claims across four states found 35 (2.5%) were directly related to language barriers. Results: 5 deaths (including 2 children), 1 comatose patient, 1 amputation, 1 child with major organ damage. In 32 of 35 cases, competent interpr...",fail:"Systemic: 32 of 35 claims involved no competent interpreter. 12 used family members including children. 12 failed to translate consent forms or discharge instructions. Nearly all had no documentati...",impact:["5 deaths including 2 children","2.5% of ALL malpractice claims","32 of 35 cases: no competent interpreter","12 cases: family/friends as interpreters","12 cases: untranslated vital documents"],lesson:"Language access failures are measurable, predictable, and preventable. They represent a consistent 2.5% of all malpractice claims across states. Documentation of interpreter use improved defense ou...",src:"Quan, UC Berkeley & National Health Law Program (2010); PMC/5758324",urls:[{l:"NHLP Full Report",u:"https://healthlaw.org/wp-content/uploads/2018/09/Language-Access-and-Malpractice.pdf"},{l:"PMC Analysis",u:"https://pmc.ncbi.nlm.nih.gov/articles/PMC5758324/"}],tags:["systemic","malpractice","national","statistics","5 deaths"]}
];

function genDemand(){var ds=["Emergency","Primary Care","OB/GYN","Cardiology","Oncology","Pediatrics"];var ms=["Staff","VRI","OPI","Contract"];var d=[];var r=42;var rn=function(){r=(r*16807)%2147483647;return(r-1)/2147483646};for(var i=0;i<500;i++){var f=FACS[Math.floor(rn()*FACS.length)];var l=DLANGS[Math.floor(rn()*DLANGS.length)];var dp=ds[Math.floor(rn()*ds.length)];var m=ms[Math.floor(rn()*ms.length)];var st=rn()<.72?"Completed":"Scheduled";var mn=Math.floor(rn()*55)+5;var g=m==="OPI"&&mn>40?"extended":rn()<.08?"no_pathway":"covered";d.push({id:i+1,fac:f.n,st:f.s,lang:l.n,dept:dp,mod:m,status:st,mins:mn,gap:g})}return d}

export default function App() {
  var _tab = useState("match"), tab = _tab[0], setTab = _tab[1];
  var _lang = useState(""), lang = _lang[0], setLang = _lang[1];
  var _loc = useState(""), loc = _loc[0], setLoc = _loc[1];
  var _mod = useState(""), mod = _mod[0], setMod = _mod[1];
  var _phrase = useState("Dolor"), phrase = _phrase[0], setPhrase = _phrase[1];
  var _tgt = useState("Spanish"), tgt = _tgt[0], setTgt = _tgt[1];
  var _cust = useState(""), cust = _cust[0], setCust = _cust[1];
  
  
  var _rCheck = useState({}), rCheck = _rCheck[0], setRCheck = _rCheck[1];
  var _dSel = useState("arabic"), dSel = _dSel[0], setDSel = _dSel[1];
  var _selLid = useState(null), selLid = _selLid[0], setSelLid = _selLid[1];
  var _qaT = useState(0), qaT = _qaT[0], setQaT = _qaT[1];
  var _drillR = useState(null), drillR = _drillR[0], setDrillR = _drillR[1];
  var _dFc = useState(null), dFc = _dFc[0], setDFc = _dFc[1];
  var _sevF = useState("all"), sevF = _sevF[0], setSevF = _sevF[1];
  var _drillC = useState(null), drillC = _drillC[0], setDrillC = _drillC[1];
  var _dSt = useState("all"), dSt = _dSt[0], setDSt = _dSt[1];
  // Input refs (uncontrolled to prevent re-render on every keystroke)
  var langRef = useRef(null);
  var locRef = useRef(null);
  var custRef = useRef(null);
  var agentQRef = useRef(null);
  var compQRef = useRef(null);
  var planQRef = useRef(null);


  // Agent states
  var _agentTab = useState("case-finder"), agentTab = _agentTab[0], setAgentTab = _agentTab[1];
  var _agentQ = useState(""), agentQ = _agentQ[0], setAgentQ = _agentQ[1];
  var _agentR = useState(null), agentR = _agentR[0], setAgentR = _agentR[1];
  var _agentLoading = useState(false), agentLoading = _agentLoading[0], setAgentLoading = _agentLoading[1];
  var _savedCases = useState([]), savedCases = _savedCases[0], setSavedCases = _savedCases[1];
  var _savedInsights = useState([]), savedInsights = _savedInsights[0], setSavedInsights = _savedInsights[1];
  var _compQ = useState(""), compQ = _compQ[0], setCompQ = _compQ[1];
  var _compR = useState(null), compR = _compR[0], setCompR = _compR[1];
  var _compLoading = useState(false), compLoading = _compLoading[0], setCompLoading = _compLoading[1];
  var _planQ = useState(""), planQ = _planQ[0], setPlanQ = _planQ[1];
  var _planR = useState(null), planR = _planR[0], setPlanR = _planR[1];
  var _planLoading = useState(false), planLoading = _planLoading[0], setPlanLoading = _planLoading[1];
  // CCHI Registry states
  var _cchiQ = useState(""), cchiQ = _cchiQ[0], setCchiQ = _cchiQ[1];
  var _cchiR = useState(null), cchiR = _cchiR[0], setCchiR = _cchiR[1];
  var _cchiLoading = useState(false), cchiLoading = _cchiLoading[0], setCchiLoading = _cchiLoading[1];
  var _cchiSaved = useState([]), cchiSaved = _cchiSaved[0], setCchiSaved = _cchiSaved[1];
  var cchiQRef = useRef(null);
  var _selVar = useState(null), selVar = _selVar[0], setSelVar = _selVar[1];
  var _varLoading = useState(false), varLoading = _varLoading[0], setVarLoading = _varLoading[1];
  var _varData = useState(null), varData = _varData[0], setVarData = _varData[1];
  var _selAid = useState(null), selAid = _selAid[0], setSelAid = _selAid[1];
  var _aidCat = useState("all"), aidCat = _aidCat[0], setAidCat = _aidCat[1];
  var _caseDeep = useState(null), caseDeep = _caseDeep[0], setCaseDeep = _caseDeep[1];
  var _caseDeepLoading = useState(false), caseDeepLoading = _caseDeepLoading[0], setCaseDeepLoading = _caseDeepLoading[1];
  var _webIntR = useState(null), webIntR = _webIntR[0], setWebIntR = _webIntR[1];
  var _webIntLoading = useState(false), webIntLoading = _webIntLoading[0], setWebIntLoading = _webIntLoading[1];


  // Storage persistence
  useEffect(function(){
    try {
      window.storage.get("ll_cases").then(function(r){if(r&&r.value)setSavedCases(JSON.parse(r.value))}).catch(function(){});
      window.storage.get("ll_insights").then(function(r){if(r&&r.value)setSavedInsights(JSON.parse(r.value))}).catch(function(){});
      window.storage.get("ll_cchi").then(function(r){if(r&&r.value)setCchiSaved(JSON.parse(r.value))}).catch(function(){});
    } catch(e){}
  },[]);
  var persist = function(k,d){try{window.storage.set(k,JSON.stringify(d)).catch(function(){})}catch(e){}};

  var gn = function(min,max){return Math.floor(Math.random()*(max-min+1))+min};
  var demand = useRef(genDemand()).current;
  var demandData = useMemo(function(){
    var filtD = demand;
    if(dSt !== "all") filtD = demand.filter(function(d){return d.st === dSt});
    var langCounts = {};
    filtD.forEach(function(d){langCounts[d.lang] = (langCounts[d.lang]||0) + 1});
    var topLangs = Object.entries(langCounts).sort(function(a,b){return b[1]-a[1]}).slice(0,10);
    var maxLC = topLangs.length > 0 ? topLangs[0][1] : 1;
    var modCounts = {};
    filtD.forEach(function(d){modCounts[d.mod] = (modCounts[d.mod]||0) + 1});
    return {filtD:filtD, topLangs:topLangs, maxLC:maxLC, modCounts:modCounts};
  }, [demand, dSt]);
  var filtD = demandData.filtD, topLangs = demandData.topLangs, maxLC = demandData.maxLC, modCounts = demandData.modCounts;
  var fInterps = useMemo(function(){
    var f = INTERPS;
    if(lang) f = f.filter(function(x){return x.langs.some(function(l){return l.toLowerCase().includes(lang.toLowerCase())})});
    if(loc) f = f.filter(function(x){return x.loc.toLowerCase().includes(loc.toLowerCase())});
    if(mod) f = f.filter(function(x){return x.mods.some(function(m){return m.toLowerCase()===mod.toLowerCase()})});
    return f;
  }, [lang, loc, mod]);
  
  
  var relayDone = Object.keys(rCheck).length;
  var tl24 = useMemo(function(){return DEMOP.reduce(function(s,d){return s+d.l24},0)},[]);
  var tl30 = useMemo(function(){return DEMOP.reduce(function(s,d){return s+d.l30},0)},[]);
  var caseData = useMemo(function(){
    var filtCases = CASES;
    if(sevF !== "all") filtCases = CASES.filter(function(c){return c.sev === sevF});
    var cFatal = CASES.filter(function(c){return c.sev==="fatal"}).length;
    var cCat = CASES.filter(function(c){return c.sev==="catastrophic"}).length;
    return {filtCases:filtCases, cFatal:cFatal, cCat:cCat};
  }, [sevF]);
  var filtCases = caseData.filtCases, cFatal = caseData.cFatal, cCat = caseData.cCat;

  var TABS = [{id:"match",ic:"\u25c8",lb:"Interpreter Match"},{id:"translate",ic:"\u25c7",lb:"Translation"},{id:"demand",ic:"\u25a3",lb:"Demand Heatmap"},{id:"relay",ic:"!",lb:"Relay Protocol"},{id:"dialect",ic:"\u25c9",lb:"Dialect Clusters"},{id:"langid",ic:"?",lb:"Language ID"},{id:"qa",ic:"Q",lb:"Translation QA"},{id:"cases",ic:"\u26a0",lb:"Real Impact"},{id:"research",ic:"R",lb:"Research"},{id:"forecast",ic:"F",lb:"Demographics"},{id:"auxaids",ic:"+",lb:"Auxiliary Aids"},{id:"cchi",ic:"C",lb:"CCHI Registry"},{id:"agents",ic:"ü§ñ",lb:"AI Agents"}];

  function P(props){return (<div style={Object.assign({background:"#fff",borderRadius:12,padding:20,border:"1px solid #e2e8f0",boxShadow:"0 1px 3px rgba(0,0,0,.04)"},props.style||{})}>{props.children}</div>)}
  function SL(props){return (<div style={{fontSize:10,fontWeight:700,color:props.color||"#94a3b8",letterSpacing:1.5,textTransform:"uppercase",marginBottom:10}}>{props.children}</div>)}
  function Tag(props){return (<span style={{display:"inline-block",padding:"3px 10px",borderRadius:10,fontSize:10,fontWeight:600,background:(props.c||"#94a3b8")+"10",color:props.c||"#94a3b8",marginRight:4}}>{props.children}</span>)}
  function pill(v,cur,fn){return (<button onClick={function(){fn(v)}} style={{padding:"6px 14px",borderRadius:10,border:cur===v?"1px solid #0891b2":"1px solid #e2e8f0",background:cur===v?"#0891b210":"#fff",color:cur===v?"#0891b2":"#94a3b8",fontSize:10,fontWeight:600,cursor:"pointer",fontFamily:"monospace"}}>{v}</button>)}

  // Agent functions
  var apiCall = function(system, query, cb){
    fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:3000,tools:[{type:"web_search_20250305",name:"web_search"}],messages:[{role:"user",content:query}],system:system})}).then(function(r){return r.json()}).then(function(d){
      var txt=(d.content||[]).map(function(b){return b.text||""}).filter(Boolean).join("");
      try{cb(JSON.parse(txt.replace(new RegExp(String.fromCharCode(96)+"{3}json|"+String.fromCharCode(96)+"{3}","g"),"").trim()),null)}catch(e){cb(null,txt)}
    }).catch(function(e){cb(null,e.message)});
  };

  var runCaseAgent = function(q){
    if(!q.trim())return;setAgentLoading(true);setAgentR(null);
    apiCall("You are a healthcare language access case researcher for Advocate Health (IL,WI,NC,SC,GA,AL). Find real documented cases where language barriers caused patient harm. Return ONLY JSON: {cases:[{title:string,year:number,location:string,severity:\"fatal\"|\"catastrophic\"|\"severe\",result:string,summary:string,whatWentWrong:string,keyLesson:string,source:string,sourceUrl:string,tags:[string]}],note:string}", q, function(data,err){
      if(data){setAgentR(data)}else{setAgentR({cases:[],note:err||"Parse error"})}
      setAgentLoading(false);
    });
  };

  var runCompAgent = function(q){
    if(!q.trim())return;setCompLoading(true);setCompR(null);
    apiCall("You are a healthcare compliance advisor for Advocate Health ($40M+ language services, 6 states: IL,WI,NC,SC,GA,AL). Return ONLY JSON: {analysis:{summary:string,riskLevel:\"critical\"|\"high\"|\"medium\"|\"low\",regulations:[{name:string,requirement:string}],recommendations:[{action:string,rationale:string,timeline:string}],stateNotes:[{state:string,note:string}]},sources:[{title:string,url:string}]}", q, function(data,err){
      if(data){setCompR(data)}else{setCompR({analysis:{summary:err||"Error",riskLevel:"medium",regulations:[],recommendations:[],stateNotes:[]},sources:[]})}
      setCompLoading(false);
    });
  };

  var runPlanAgent = function(q){
    if(!q.trim())return;setPlanLoading(true);setPlanR(null);
    apiCall("You are a strategic planner for Advocate Health language services (AVP Emmanuel Chepkwony, $40M+ budget, 160+ interpreters, 6 states). Return ONLY JSON: {plan:{title:string,summary:string,timeframe:string,phases:[{name:string,duration:string,actions:[{action:string,owner:string}]}],kpis:[{metric:string,current:string,target:string}],roi:{investment:string,expectedReturn:string},risks:[{risk:string,mitigation:string}]}}", q, function(data,err){
      if(data){setPlanR(data)}else{setPlanR({plan:{title:"Error",summary:err||"Error",timeframe:"",phases:[],kpis:[],roi:{},risks:[]}})}
      setPlanLoading(false);
    });
  };

  



  var runCaseDeep = function(caseObj){
    setCaseDeepLoading(true);setCaseDeep(null);
    var q = "Research this healthcare language barrier case in depth: " + caseObj.ti + " (" + caseObj.yr + ", " + caseObj.loc + "). The original source is: " + (caseObj.urls && caseObj.urls.length > 0 ? caseObj.urls.map(function(u){return u.url}).join(", ") : caseObj.src) + ". Result: " + caseObj.result + ". Find the full story including: the patient involved, what happened step by step, what language barrier caused the failure, the medical consequences, the legal outcome, and what changed after. Also find any similar cases or patterns.";
    apiCall("You are a healthcare malpractice and language access researcher. Research the given case using web search to find the full story from primary sources. Provide a detailed narrative. Return ONLY JSON: {story:{headline:string,patient:string,timeline:[{date:string,event:string}],whatHappened:string,languageBarrier:string,medicalConsequence:string,legalOutcome:string,settlement:string,systemicFailures:[string],whatChanged:string,similarCases:[{title:string,year:string,relevance:string}],quotesFromCase:[string],advocateHealthRelevance:string,lessonsForLeadership:string},sources:[{title:string,url:string}]}", q, function(data, err){
      if(data){setCaseDeep(data)}else{setCaseDeep({story:{headline:"Could not load full story",whatHappened:err||"Search error",languageBarrier:"",medicalConsequence:"",legalOutcome:"",systemicFailures:[],whatChanged:"",similarCases:[],quotesFromCase:[],lessonsForLeadership:""},sources:[]})}
      setCaseDeepLoading(false);
    });
  };

  var runDialectDeep = function(dialectName, region, cluster){
    setVarLoading(true);setVarData(null);setSelVar(dialectName);
    apiCall("You are a linguistic anthropologist specializing in healthcare interpreting. Provide a rich, detailed profile of a language/dialect. Include its history, origins, evolution, cultural context, and healthcare-specific considerations. Return ONLY JSON: {profile:{name:string,family:string,familyBranch:string,origins:string,history:string,evolution:string,speakers:string,writingSystem:string,culturalContext:string,healthcareNotes:string,keyFacts:[string],commonMisconceptions:[string],dialectFeatures:string,migrationPatterns:string,usPopulation:string,healthcareChallenges:[string],interpreterTips:[string]}}", "Give me a deep linguistic profile of " + dialectName + " (" + region + ") from the " + cluster + " language cluster. Focus on: 1) Language family and historical origins 2) How the language evolved and split from related languages 3) Writing system and literacy 4) Migration patterns to the US 5) Cultural health beliefs that affect interpreting 6) Common misconceptions 7) Specific healthcare interpreting challenges 8) Tips for interpreter dispatch", function(data, err){
      if(data){setVarData(data)}else{setVarData({profile:{name:dialectName,history:"Could not load. " + (err||""),origins:"",evolution:"",speakers:"",culturalContext:"",healthcareNotes:"",keyFacts:[],commonMisconceptions:[],interpreterTips:[]}})}
      setVarLoading(false);
    });
  };;

  var runWebIntSearch = function(q){
    if(!q.trim())return;setWebIntLoading(true);setWebIntR(null);
    apiCall("You are a healthcare interpreter recruitment researcher for Advocate Health (IL,WI,NC,SC,GA,AL). Search the web for qualified medical interpreters, interpreter agencies, and interpreter training programs matching the query. Look for CCHI-certified, NBCMI-certified, or qualified bilingual healthcare professionals. Organize results into categories. Return ONLY JSON: {agencies:[{name:string,location:string,languages:string,website:string,note:string}],interpreters:[{name:string,credential:string,language:string,location:string,contact:string}],resources:[{name:string,type:string,url:string,note:string}],summary:string}", q, function(data,err){
      if(data){setWebIntR(data)}else{setWebIntR({results:[],summary:err||"Search error"})}
      setWebIntLoading(false);
    });
  };

  var runCchiAgent = function(q){
    if(!q.trim())return;setCchiLoading(true);setCchiR(null);
    apiCall("You are a CCHI certified healthcare interpreter registry researcher. Search the web for CCHI-certified interpreters matching the query. The CCHI National Healthcare Interpreter Registry is at https://cchi.learningbuilder.com/Public/MemberSearch/Search and the registry browser is at https://cchi.learningbuilder.com/Search/Public/MemberRole/Registry. Credentials include CoreCHI, CoreCHI-P, and CHI (language-specific: Spanish, Arabic, Mandarin). Search for interpreters by state, language, or name. Return ONLY JSON: {interpreters:[{name:string,credential:string,language:string,state:string,status:string,email:string}],registryNote:string,totalFound:number,searchTip:string}", q, function(data,err){
      if(data){setCchiR(data)}else{setCchiR({interpreters:[],registryNote:err||"Could not parse results. Try the direct registry link below.",totalFound:0,searchTip:""})}
      setCchiLoading(false);
    });
  };
  var saveCchi = function(interp){var nc=cchiSaved.concat([Object.assign({},interp,{ts:new Date().toISOString()})]);setCchiSaved(nc);persist("ll_cchi",nc)};

  var saveCaseA = function(c){var nc=savedCases.concat([Object.assign({},c,{ts:new Date().toISOString()})]);setSavedCases(nc);persist("ll_cases",nc)};
  var saveIns = function(t,ty){var ni=savedInsights.concat([{text:t,type:ty,ts:new Date().toISOString()}]);setSavedInsights(ni);persist("ll_insights",ni)};
  var catC = {community:"#059669",technology:"#0891b2",linguistic:"#7c3aed",documentation:"#d97706",vendor:"#dc2626",internal:"#3b82f6"};
  var sevC = {fatal:"#dc2626",catastrophic:"#7c3aed",severe:"#d97706",systemic:"#0891b2"};
  var ATABS = [{id:"case-finder",ic:"üîç",lb:"Case Research"},{id:"compliance",ic:"‚öñ",lb:"Compliance"},{id:"planner",ic:"üìã",lb:"Planner"},{id:"saved",ic:"üíæ",lb:"Library"}];
  var abtn = {padding:"8px 16px",borderRadius:8,border:"none",fontSize:11,fontWeight:700,cursor:"pointer",fontFamily:"monospace"};
  var chip = function(s,fn){return (<button onClick={function(){fn(s)}} style={{fontSize:9,padding:"3px 8px",borderRadius:6,border:"1px solid #e2e8f0",background:"#f8fafc",color:"#64748b",cursor:"pointer"}}>{s}</button>)};

  return (
    <main style={{fontFamily:"'JetBrains Mono',monospace",maxWidth:1200,margin:"0 auto",padding:20,background:"#f8fafc",minHeight:"100vh"}}>
      <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800;900&family=JetBrains+Mono:wght@400;600;700&display=swap" rel="stylesheet"/>
      <div style={{background:"linear-gradient(135deg,#0f172a,#1e293b)",borderRadius:16,padding:"24px 28px",marginBottom:20,color:"#fff"}}>
        <div style={{fontSize:11,fontWeight:600,color:"#0891b2",textTransform:"uppercase",letterSpacing:2}}>Advocate Health</div>
        <h1 style={{fontFamily:"Outfit",fontSize:28,fontWeight:900,margin:"4px 0"}}>LinguaLink Enterprise</h1>
        <div style={{fontSize:11,color:"#94a3b8"}}>Language Services Command Center | 6 States | 160+ Interpreters | $40M+ Operations</div>
      </div>
      <div style={{display:"flex",gap:6,flexWrap:"wrap",marginBottom:20}}>
        {TABS.map(function(t){return (<button key={t.id} onClick={function(){setTab(t.id)}} style={{padding:"8px 14px",borderRadius:10,border:tab===t.id?"1px solid #0891b2":"1px solid #e2e8f0",background:tab===t.id?"#0891b210":"#fff",color:tab===t.id?"#0891b2":"#94a3b8",fontSize:10,fontWeight:600,cursor:"pointer",fontFamily:"monospace"}}><span style={{marginRight:4}}>{t.ic}</span>{t.lb}</button>)})}
      </div>

      {tab==="match" && (<div>
        <h1 style={{fontFamily:"Outfit",fontSize:26,fontWeight:800,color:"#0f172a",marginBottom:16}}>Interpreter Match</h1>
        <P style={{marginBottom:16}}>
          <div style={{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",gap:10,alignItems:"end"}}>
            <div><SL>Language</SL><input ref={langRef} defaultValue={lang} onKeyDown={function(e){if(e.key==="Enter"){setLang(e.target.value)}}} placeholder="e.g. Spanish, Arabic..." style={{width:"100%",padding:"8px 12px",borderRadius:8,border:"1px solid #e2e8f0",fontSize:11,fontFamily:"monospace",outline:"none",boxSizing:"border-box"}}/></div>
            <div><SL>Location</SL><input ref={locRef} defaultValue={loc} onKeyDown={function(e){if(e.key==="Enter"){setLoc(e.target.value)}}} placeholder="e.g. Illinois..." style={{width:"100%",padding:"8px 12px",borderRadius:8,border:"1px solid #e2e8f0",fontSize:11,fontFamily:"monospace",outline:"none",boxSizing:"border-box"}}/></div>
            <div><SL>Modality</SL><div style={{display:"flex",gap:4}}>{["","In-Person","Video","Phone"].map(function(m){return pill(m||"All",mod||"All",function(v){setMod(v==="All"?"":v)})})}</div></div>
            <button onClick={function(){var l=langRef.current?langRef.current.value:"";var lo=locRef.current?locRef.current.value:"";setLang(l);setLoc(lo)}} style={Object.assign({},abtn,{background:"#0891b2",color:"#fff",padding:"8px 20px"})}>Search</button>
          </div>
        </P>
        <div style={{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(280px,1fr))",gap:10}}>
          {fInterps.map(function(ip,i){return (<P key={i} style={{borderLeft:"3px solid #0891b2"}}>
            <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6}}><span style={{fontSize:14,fontWeight:800,fontFamily:"Outfit"}}>{ip.name}</span><span style={{fontSize:10,padding:"3px 8px",borderRadius:10,background:"#05966910",color:"#059669"}}>{ip.rate}</span></div>
            <div style={{fontSize:10,color:"#64748b",marginBottom:6}}>{ip.loc}</div>
            <div style={{display:"flex",flexWrap:"wrap",gap:4,marginBottom:4}}>{ip.langs.map(function(l){return (<Tag key={l} c="#0891b2">{l}</Tag>)})}</div>
            <div style={{display:"flex",flexWrap:"wrap",gap:4}}>{ip.mods.map(function(m){return (<Tag key={m} c="#7c3aed">{m}</Tag>)})}</div>
          </P>)})}
        </div>
        {fInterps.length===0 && (<P style={{textAlign:"center",padding:20}}><div style={{fontSize:11,color:"#d97706"}}>No internal interpreters match. Try the web search below.</div></P>)}
        {lang && LR[lang.toLowerCase().slice(0,2)] && (<P style={{marginTop:12,background:"#f0f9ff",borderColor:"#0891b220"}}>
          <SL color="#0891b2">Language Network: {lang}</SL>
          {(function(){var lr=LR[lang.toLowerCase().slice(0,2)];return lr?(<div>
            <div style={{fontSize:11,color:"#475569",marginBottom:8}}>{lr.cult}</div>
            {lr.mi.length>0 && (<div style={{marginBottom:8}}><div style={{fontSize:9,fontWeight:700,color:"#7c3aed",marginBottom:4}}>MUTUAL INTELLIGIBILITY</div>{lr.mi.map(function(m){return (<div key={m.c} style={{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid #f1f5f9"}}><span style={{fontSize:10}}>{m.n}</span><span style={{fontSize:10,color:m.p>60?"#059669":"#d97706"}}>{m.p}% - {m.t}</span></div>)})}</div>)}
            {lr.cb.length>0 && (<div><div style={{fontSize:9,fontWeight:700,color:"#059669",marginBottom:4}}>BRIDGE LANGUAGES</div>{lr.cb.map(function(c){return (<div key={c.c} style={{fontSize:10,padding:"3px 0"}}>{c.n} ({c.pr}) - {c.t}</div>)})}</div>)}
          </div>):null})()}
        </P>)}
        <P style={{marginTop:16,background:"linear-gradient(135deg,#0f172a,#1e293b)",color:"#fff"}}>
          <div style={{fontSize:11,fontWeight:700,color:"#0891b2",letterSpacing:1.5,textTransform:"uppercase",marginBottom:10}}>Web Interpreter Search</div>
          <div style={{fontSize:10,color:"#94a3b8",marginBottom:10}}>Search the web for certified interpreters, agencies, and training programs in your area.</div>
          <div style={{display:"flex",gap:8,marginBottom:8}}><input defaultValue="" onKeyDown={function(e){if(e.key==="Enter")runWebIntSearch(e.target.value)}} placeholder="e.g. Spanish medical interpreters Chicago CCHI certified" style={{flex:1,padding:"10px 14px",borderRadius:8,border:"1px solid #334155",background:"#1e293b",color:"#fff",fontSize:12,fontFamily:"monospace",outline:"none"}}/><button onClick={function(e){var inp=e.target.previousSibling;runWebIntSearch(inp?inp.value:"")}} disabled={webIntLoading} style={Object.assign({},abtn,{background:webIntLoading?"#334155":"#0891b2",color:"#fff"})}>{webIntLoading?"Searching...":"Find"}</button></div>
          <div style={{display:"flex",flexWrap:"wrap",gap:4}}>{["Spanish interpreters Illinois CCHI","Arabic medical interpreter North Carolina","Karen Chin interpreter recruitment","Somali healthcare interpreter Wisconsin","ASL interpreter Georgia","Mandarin interpreter Alabama"].map(function(s){return (<button key={s} onClick={function(){runWebIntSearch(s)}} style={{fontSize:9,padding:"3px 8px",borderRadius:6,border:"1px solid #334155",background:"#0f172a",color:"#94a3b8",cursor:"pointer"}}>{s}</button>)})}</div>
        </P>
        {webIntLoading && (<P style={{textAlign:"center",padding:20,marginTop:8}}><div style={{fontSize:12,fontWeight:700,color:"#0891b2"}}>Searching the web for interpreters...</div></P>)}
        {webIntR && (<div style={{marginTop:12}} className="fade-in">
          {webIntR.summary && (<div style={{fontSize:12,color:"#0f172a",fontWeight:600,marginBottom:12,padding:10,background:"#f0f9ff",borderRadius:8,borderLeft:"3px solid #0891b2"}}>{webIntR.summary}</div>)}
          {webIntR.agencies && webIntR.agencies.length > 0 && (<div style={{marginBottom:16}}><div style={{fontSize:11,fontWeight:700,color:"#0891b2",textTransform:"uppercase",letterSpacing:1.5,marginBottom:8}}>Agencies & Organizations</div>
            <div style={{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(280px,1fr))",gap:8}}>{webIntR.agencies.map(function(a,i){return (<div key={i} style={{padding:14,borderRadius:10,border:"1px solid #e2e8f0",borderTop:"3px solid #0891b2",background:"#fff"}}><div style={{fontSize:13,fontWeight:800,fontFamily:"Outfit",marginBottom:4}}>{a.name}</div>{a.location && (<div style={{fontSize:10,color:"#059669",marginBottom:4}}>{a.location}</div>)}{a.languages && (<div style={{fontSize:10,color:"#7c3aed",marginBottom:4}}>{a.languages}</div>)}{a.note && (<div style={{fontSize:10,color:"#475569",marginBottom:6}}>{a.note}</div>)}{a.website && (<a href={a.website.startsWith("http")?a.website:"https://"+a.website} target="_blank" rel="noopener noreferrer" style={{fontSize:10,color:"#0891b2",textDecoration:"none",fontWeight:600}}>Visit Website</a>)}</div>)})}</div>
          </div>)}
          {webIntR.interpreters && webIntR.interpreters.length > 0 && (<div style={{marginBottom:16}}><div style={{fontSize:11,fontWeight:700,color:"#7c3aed",textTransform:"uppercase",letterSpacing:1.5,marginBottom:8}}>Individual Interpreters</div>
            <div style={{overflowX:"auto"}}><table style={{width:"100%",borderCollapse:"collapse",fontSize:10,background:"#fff",borderRadius:8}}><thead><tr style={{borderBottom:"2px solid #e2e8f0",background:"#f8fafc"}}><td style={{padding:10,fontWeight:700}}>Name</td><td style={{padding:10,fontWeight:700}}>Credential</td><td style={{padding:10,fontWeight:700}}>Language</td><td style={{padding:10,fontWeight:700}}>Location</td><td style={{padding:10,fontWeight:700}}>Contact</td></tr></thead><tbody>{webIntR.interpreters.map(function(p,i){return (<tr key={i} style={{borderBottom:"1px solid #f1f5f9"}}><td style={{padding:10,fontWeight:600}}>{p.name}</td><td style={{padding:10}}>{p.credential && (<Tag c="#7c3aed">{p.credential}</Tag>)}</td><td style={{padding:10}}>{p.language}</td><td style={{padding:10,color:"#64748b"}}>{p.location}</td><td style={{padding:10,color:"#0891b2"}}>{p.contact}</td></tr>)})}</tbody></table></div>
          </div>)}
          {webIntR.resources && webIntR.resources.length > 0 && (<div><div style={{fontSize:11,fontWeight:700,color:"#059669",textTransform:"uppercase",letterSpacing:1.5,marginBottom:8}}>Resources & Training</div>
            <div style={{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(250px,1fr))",gap:8}}>{webIntR.resources.map(function(r,i){return (<div key={i} style={{padding:12,borderRadius:10,border:"1px solid #e2e8f0",background:"#fff"}}><div style={{display:"flex",justifyContent:"space-between"}}><div style={{fontSize:12,fontWeight:700,fontFamily:"Outfit"}}>{r.name}</div>{r.type && (<Tag c="#64748b">{r.type}</Tag>)}</div>{r.note && (<div style={{fontSize:10,color:"#475569",marginTop:4}}>{r.note}</div>)}{r.url && (<a href={r.url} target="_blank" rel="noopener noreferrer" style={{fontSize:10,color:"#0891b2",textDecoration:"none",fontWeight:600,marginTop:4,display:"inline-block"}}>Visit</a>)}</div>)})}</div>
          </div>)}
        </div>)}
      </div>)}

      {tab==="translate" && (<div>
        <h1 style={{fontFamily:"Outfit",fontSize:26,fontWeight:800,marginBottom:16}}>Translation Engine</h1>
        <P style={{marginBottom:16}}>
          <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16}}>
            <div><SL>Phrase</SL><div style={{display:"flex",flexWrap:"wrap",gap:4,marginBottom:8}}>{["Dolor","Nausea","Difficulty Breathing","Consent","Allergic","Medication"].map(function(p){return (<button key={p} onClick={function(){setPhrase(p)}} style={{padding:"6px 12px",borderRadius:8,border:phrase===p?"1px solid #0891b2":"1px solid #e2e8f0",background:phrase===p?"#0891b210":"#fff",color:phrase===p?"#0891b2":"#64748b",fontSize:10,cursor:"pointer"}}>{p}</button>)})}</div>
            <input ref={custRef} defaultValue={cust} onBlur={function(e){setCust(e.target.value)}} onKeyDown={function(e){if(e.key==="Enter")setCust(e.target.value)}} placeholder="Custom phrase... (press Enter)" style={{width:"100%",padding:"8px 12px",borderRadius:8,border:"1px solid #e2e8f0",fontSize:11,fontFamily:"monospace",outline:"none",boxSizing:"border-box"}}/></div>
            <div><SL>Target Language</SL><div style={{display:"flex",flexWrap:"wrap",gap:4}}>{["Spanish","Arabic","Mandarin","Vietnamese","Korean","Somali","Swahili","French"].map(function(l){return (<button key={l} onClick={function(){setTgt(l)}} style={{padding:"6px 12px",borderRadius:8,border:tgt===l?"1px solid #7c3aed":"1px solid #e2e8f0",background:tgt===l?"#7c3aed10":"#fff",color:tgt===l?"#7c3aed":"#64748b",fontSize:10,cursor:"pointer"}}>{l}</button>)})}</div></div>
          </div>
        </P>
        <P style={{background:"linear-gradient(135deg,#f0f9ff,#faf5ff)"}}>
          <SL color="#0891b2">AI Translation Output</SL>
          <div style={{fontSize:22,fontWeight:800,fontFamily:"Outfit",marginBottom:8}}>{cust||phrase} \u2192 {tgt}</div>
          <div style={{fontSize:11,color:"#64748b"}}>Register: Clinical | Confidence: High | Back-translation verified</div>
          <div style={{marginTop:12,padding:12,background:"#fffbeb",borderRadius:8,border:"1px solid #fde68a"}}><div style={{fontSize:10,color:"#92400e",fontWeight:700}}>\u26a0 AI translations require human interpreter verification before clinical use per Advocate Health policy.</div></div>
        </P>
      </div>)}

      {tab==="demand" && (<div>
        <h1 style={{fontFamily:"Outfit",fontSize:26,fontWeight:800,marginBottom:16}}>Demand Heatmap</h1>
        <div style={{display:"flex",gap:4,marginBottom:16}}>{["all","Illinois","Wisconsin","North Carolina","South Carolina","Georgia","Alabama"].map(function(s){return pill(s,dSt,setDSt)})}</div>
        <div style={{display:"grid",gridTemplateColumns:"2fr 1fr",gap:16}}>
          <P><SL color="#0891b2">Language Distribution ({filtD.length} encounters)</SL>
            {topLangs.map(function(e){return (<div key={e[0]} style={{display:"flex",alignItems:"center",gap:10,marginBottom:6}}>
              <span style={{fontSize:10,width:80,flexShrink:0}}>{e[0]}</span>
              <div style={{flex:1,height:16,background:"#f1f5f9",borderRadius:4,overflow:"hidden"}}><div style={{height:"100%",width:Math.round(e[1]/maxLC*100)+"%",background:"linear-gradient(90deg,#0891b2,#7c3aed)",borderRadius:4}}></div></div>
              <span style={{fontSize:10,fontWeight:700,color:"#0891b2",width:30}}>{e[1]}</span>
            </div>)})}
          </P>
          <P><SL color="#7c3aed">By Modality</SL>
            {Object.entries(modCounts).map(function(e){return (<div key={e[0]} style={{display:"flex",justifyContent:"space-between",padding:"6px 0",borderBottom:"1px solid #f1f5f9"}}><span style={{fontSize:10}}>{e[0]}</span><span style={{fontSize:10,fontWeight:700,color:"#7c3aed"}}>{e[1]}</span></div>)})}
          </P>
        </div>
      </div>)}

      

      {tab==="relay" && (<div>
        <h1 style={{fontFamily:"Outfit",fontSize:26,fontWeight:800,marginBottom:16}}>Relay Protocol</h1>
        <div style={{display:"grid",gridTemplateColumns:"2fr 1fr",gap:16}}>
          <P><SL color="#dc2626">8-Step Checklist ({relayDone}/{RELAY.length})</SL>
            {RELAY.map(function(r){return (<div key={r.id} onClick={function(){var n=Object.assign({},rCheck);if(n[r.id])delete n[r.id];else n[r.id]=true;setRCheck(n)}} style={{display:"flex",gap:10,alignItems:"flex-start",padding:"10px 0",borderBottom:"1px solid #f1f5f9",cursor:"pointer"}}>
              <div style={{width:22,height:22,borderRadius:6,border:"2px solid "+(rCheck[r.id]?"#059669":"#e2e8f0"),background:rCheck[r.id]?"#05966910":"#fff",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,fontSize:12}}>{rCheck[r.id]?"\u2713":""}</div>
              <div><div style={{fontSize:11,fontWeight:700}}>{r.step}</div>{r.crit && (<span style={{fontSize:9,color:"#dc2626",fontWeight:700}}>CRITICAL</span>)}</div>
            </div>)})}
          </P>
          <P style={{background:"#fef2f2",borderColor:"#fca5a5"}}><SL color="#dc2626">Escalation Triggers</SL>
            {[{t:"Patient confused",a:"PAUSE. Teach-back."},{t:"Interpreter difficulty",a:"PAUSE. Simplify."},{t:"Cannot relay terms",a:"Visual aids. Terminate."},{t:"Patient requests different",a:"Honor immediately."},{t:"Exceeds 45 min",a:"Break. Assess."}].map(function(r,i){return (<div key={i} style={{padding:"8px 0",borderBottom:"1px solid #fecaca",fontSize:10,color:"#991b1b"}}><span style={{fontWeight:700}}>{r.t}: </span>{r.a}</div>)})}
          </P>
        </div>
      </div>)}

      {tab==="dialect" && (<div>
        <h1 style={{fontFamily:"Outfit",fontSize:26,fontWeight:800,marginBottom:4}}>Dialect Clusters</h1>
        <p style={{color:"#64748b",fontSize:11,marginBottom:16}}>9 high-risk language clusters with 68 dialect variants. Tap a variant card for AI-powered deep dive into language history, culture, and healthcare considerations.</p>
        <div style={{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(140px,1fr))",gap:6,marginBottom:20}}>{Object.keys(DC).map(function(k){var dc=DC[k];var rc=dc.risk==="HIGH"?"#dc2626":dc.risk==="MED-HIGH"?"#d97706":dc.risk==="MED"?"#0891b2":"#059669";return (<button key={k} onClick={function(){setDSel(k);setSelVar(null);setVarData(null)}} style={{padding:"10px 8px",borderRadius:10,border:dSel===k?"2px solid "+rc:"1px solid #e2e8f0",background:dSel===k?rc+"08":"#fff",cursor:"pointer",textAlign:"left",transition:"all 0.15s"}}><div style={{fontSize:9,fontWeight:700,color:rc,marginBottom:2}}>{dc.risk}</div><div style={{fontSize:11,fontWeight:700,fontFamily:"Outfit",color:"#0f172a"}}>{dc.name}</div><div style={{fontSize:9,color:"#94a3b8"}}>{dc.vars.length} variants</div></button>)})}</div>
        {(function(){var dc=DC[dSel];if(!dc)return null;var rkC={crit:"#dc2626",high:"#d97706",med:"#0891b2",low:"#059669"};return (<div className="fade-in">
          <div style={{background:"linear-gradient(135deg,#0f172a,#1e293b)",borderRadius:16,padding:24,marginBottom:16,color:"#fff"}}>
            <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12}}><div><div style={{fontSize:22,fontWeight:800,fontFamily:"Outfit"}}>{dc.name}</div><div style={{fontSize:11,color:"#94a3b8",marginTop:4}}>{dc.vars.length} dialect variants mapped</div></div><div style={{padding:"6px 14px",borderRadius:8,background:dc.risk==="HIGH"?"#dc262620":"#d9760620",color:dc.risk==="HIGH"?"#fca5a5":"#fde68a",fontSize:12,fontWeight:700}}>{dc.risk} RISK</div></div>
            <div style={{fontSize:12,color:"#cbd5e1",lineHeight:1.6,marginBottom:12}}>{dc.scenario}</div>
            <div style={{padding:12,background:"#dc262615",borderRadius:10,border:"1px solid #dc262640"}}><div style={{fontSize:10,fontWeight:700,color:"#fca5a5",marginBottom:2}}>DISPATCH WARNING</div><div style={{fontSize:11,color:"#fecaca"}}>{dc.warn}</div></div>
          </div>
          <div style={{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:10,marginBottom:16}}>
            {dc.vars.map(function(v,i){var col=rkC[v.rk]||"#94a3b8";var isActive=selVar===v.n;return (<div key={i} onClick={function(){if(selVar===v.n){setSelVar(null);setVarData(null)}else{runDialectDeep(v.n,v.r,dc.name)}}} style={{padding:16,borderRadius:12,border:isActive?"2px solid "+col:"1px solid #e2e8f0",borderTop:"3px solid "+col,background:isActive?"#f8fafc":"#fff",cursor:"pointer",transition:"all 0.15s"}}>
              <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8}}><div style={{fontSize:13,fontWeight:800,fontFamily:"Outfit"}}>{v.n}</div><div style={{fontSize:8,fontWeight:700,padding:"2px 8px",borderRadius:6,background:col+"15",color:col,textTransform:"uppercase"}}>{v.rk}</div></div>
              <div style={{fontSize:10,color:"#7c3aed",fontWeight:600,marginBottom:4}}>{v.r}</div>
              <div style={{fontSize:10,color:"#475569",lineHeight:1.5}}>{v.i}</div>
              <div style={{fontSize:8,color:"#0891b2",marginTop:6,fontWeight:600}}>Tap for deep dive</div>
            </div>)})}
          </div>

          {varLoading && (<div style={{padding:30,textAlign:"center",background:"#f8fafc",borderRadius:12,border:"1px solid #e2e8f0"}}><div style={{fontSize:14,fontWeight:700,color:"#0891b2",marginBottom:4}}>Researching {selVar}...</div><div style={{fontSize:10,color:"#94a3b8"}}>Loading language history, cultural context, and healthcare considerations</div></div>)}

          {varData && varData.profile && !varLoading && (<div className="fade-in" style={{background:"#fff",borderRadius:16,border:"1px solid #e2e8f0",overflow:"hidden",marginBottom:16}}>
            <div style={{background:"linear-gradient(135deg,#7c3aed,#6d28d9)",padding:20,color:"#fff"}}><div style={{fontSize:20,fontWeight:800,fontFamily:"Outfit"}}>{varData.profile.name}</div>{varData.profile.family && (<div style={{fontSize:11,color:"#ddd6fe",marginTop:4}}>Language Family: {varData.profile.family}{varData.profile.familyBranch?" > "+varData.profile.familyBranch:""}</div>)}{varData.profile.speakers && (<div style={{fontSize:10,color:"#c4b5fd",marginTop:2}}>Speakers: {varData.profile.speakers}</div>)}</div>
            <div style={{padding:20}}>
              {varData.profile.origins && (<div style={{marginBottom:16}}><div style={{fontSize:10,fontWeight:700,color:"#7c3aed",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Origins</div><div style={{fontSize:11,color:"#475569",lineHeight:1.7}}>{varData.profile.origins}</div></div>)}
              {varData.profile.history && (<div style={{marginBottom:16}}><div style={{fontSize:10,fontWeight:700,color:"#0891b2",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>History & Evolution</div><div style={{fontSize:11,color:"#475569",lineHeight:1.7}}>{varData.profile.history}</div></div>)}
              {varData.profile.evolution && (<div style={{marginBottom:16}}><div style={{fontSize:10,fontWeight:700,color:"#059669",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Language Development</div><div style={{fontSize:11,color:"#475569",lineHeight:1.7}}>{varData.profile.evolution}</div></div>)}
              <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:16}}>
                {varData.profile.writingSystem && (<div style={{padding:12,background:"#f8fafc",borderRadius:10}}><div style={{fontSize:9,fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:1,marginBottom:4}}>Writing System</div><div style={{fontSize:11,color:"#0f172a"}}>{varData.profile.writingSystem}</div></div>)}
                {varData.profile.usPopulation && (<div style={{padding:12,background:"#f0f9ff",borderRadius:10}}><div style={{fontSize:9,fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:1,marginBottom:4}}>US Population</div><div style={{fontSize:11,color:"#0f172a"}}>{varData.profile.usPopulation}</div></div>)}
              </div>
              {varData.profile.migrationPatterns && (<div style={{marginBottom:16}}><div style={{fontSize:10,fontWeight:700,color:"#d97706",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Migration to the US</div><div style={{fontSize:11,color:"#475569",lineHeight:1.7}}>{varData.profile.migrationPatterns}</div></div>)}
              {varData.profile.culturalContext && (<div style={{marginBottom:16,padding:14,background:"#fffbeb",borderRadius:10,border:"1px solid #fde68a"}}><div style={{fontSize:10,fontWeight:700,color:"#92400e",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Cultural Context & Health Beliefs</div><div style={{fontSize:11,color:"#78350f",lineHeight:1.7}}>{varData.profile.culturalContext}</div></div>)}
              {varData.profile.dialectFeatures && (<div style={{marginBottom:16}}><div style={{fontSize:10,fontWeight:700,color:"#7c3aed",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Distinctive Features</div><div style={{fontSize:11,color:"#475569",lineHeight:1.7}}>{varData.profile.dialectFeatures}</div></div>)}
              {varData.profile.keyFacts && varData.profile.keyFacts.length > 0 && (<div style={{marginBottom:16}}><div style={{fontSize:10,fontWeight:700,color:"#0891b2",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Key Facts</div><div style={{display:"grid",gap:4}}>{varData.profile.keyFacts.map(function(f,i){return (<div key={i} style={{display:"flex",gap:8,alignItems:"flex-start",fontSize:11,color:"#475569"}}><span style={{color:"#0891b2",fontWeight:700,flexShrink:0}}>-</span>{f}</div>)})}</div></div>)}
              {varData.profile.commonMisconceptions && varData.profile.commonMisconceptions.length > 0 && (<div style={{marginBottom:16,padding:14,background:"#fef2f2",borderRadius:10,border:"1px solid #fca5a5"}}><div style={{fontSize:10,fontWeight:700,color:"#991b1b",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Common Misconceptions</div><div style={{display:"grid",gap:4}}>{varData.profile.commonMisconceptions.map(function(m,i){return (<div key={i} style={{display:"flex",gap:8,alignItems:"flex-start",fontSize:11,color:"#991b1b"}}><span style={{fontWeight:700,flexShrink:0}}>X</span>{m}</div>)})}</div></div>)}
              {varData.profile.healthcareChallenges && varData.profile.healthcareChallenges.length > 0 && (<div style={{marginBottom:16}}><div style={{fontSize:10,fontWeight:700,color:"#dc2626",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Healthcare Interpreting Challenges</div><div style={{display:"grid",gap:4}}>{varData.profile.healthcareChallenges.map(function(h,i){return (<div key={i} style={{display:"flex",gap:8,alignItems:"flex-start",fontSize:11,color:"#475569"}}><span style={{color:"#dc2626",fontWeight:700,flexShrink:0}}>!</span>{h}</div>)})}</div></div>)}
              {varData.profile.interpreterTips && varData.profile.interpreterTips.length > 0 && (<div style={{padding:14,background:"#f0fdf4",borderRadius:10,border:"1px solid #bbf7d0"}}><div style={{fontSize:10,fontWeight:700,color:"#166534",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Interpreter Dispatch Tips</div><div style={{display:"grid",gap:4}}>{varData.profile.interpreterTips.map(function(t,i){return (<div key={i} style={{display:"flex",gap:8,alignItems:"flex-start",fontSize:11,color:"#166534"}}><span style={{fontWeight:700,flexShrink:0}}>+</span>{t}</div>)})}</div></div>)}
              {varData.profile.healthcareNotes && (<div style={{marginTop:16,padding:14,background:"#0f172a",borderRadius:10}}><div style={{fontSize:10,fontWeight:700,color:"#0891b2",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Advocate Health Notes</div><div style={{fontSize:11,color:"#cbd5e1",lineHeight:1.7}}>{varData.profile.healthcareNotes}</div></div>)}
            </div>
          </div>)}
        </div>)})()}
      </div>)}

      {tab==="langid" && (<div>
        <h1 style={{fontFamily:"Outfit",fontSize:26,fontWeight:800,marginBottom:4}}>Language Identification</h1>
        <p style={{color:"#64748b",fontSize:11,marginBottom:16}}>Tap a language to identify. Shows native script, greeting phrase, and language details for frontline staff.</p>
        <div style={{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(180px,1fr))",gap:8}}>
          {LID.map(function(l,i){var isOpen=selLid===i;return (<div key={i} onClick={function(){setSelLid(isOpen?null:i)}} style={{padding:14,borderRadius:12,border:isOpen?"2px solid #0891b2":"1px solid #e2e8f0",background:isOpen?"#f0f9ff":"#fff",cursor:"pointer",transition:"all 0.15s"}}>
            <div style={{display:"flex",justifyContent:"space-between",alignItems:"center"}}>
              <div style={{fontSize:14,fontWeight:800,fontFamily:"Outfit"}}>{l.n}</div>
              <div style={{fontSize:9,color:"#94a3b8"}}>{l.c.toUpperCase()}</div>
            </div>
            <div style={{fontSize:20,marginTop:6,fontWeight:600}}>{l.nat}</div>
            {isOpen && (<div className="fade-in" style={{marginTop:10,paddingTop:10,borderTop:"1px solid #e2e8f0"}}>
              <div style={{marginBottom:8}}><div style={{fontSize:9,fontWeight:700,color:"#7c3aed",textTransform:"uppercase",letterSpacing:1,marginBottom:4}}>Greeting Phrase</div><div style={{fontSize:16,fontWeight:600,color:"#0891b2",padding:10,background:"#f0f9ff",borderRadius:8,textAlign:"center"}}>{l.g}</div></div>
              <div style={{fontSize:10,color:"#475569",lineHeight:1.6}}>
                <div><span style={{fontWeight:700}}>ISO Code:</span> {l.c}</div>
                <div><span style={{fontWeight:700}}>Native Name:</span> {l.nat}</div>
                <div style={{marginTop:6,padding:8,background:"#059669",borderRadius:8,color:"#fff",textAlign:"center",fontSize:11,fontWeight:700}}>Show this to patient for identification</div>
              </div>
            </div>)}
          </div>)})}
        </div>
      </div>)}

      {tab==="qa" && (<div>
        <h1 style={{fontFamily:"Outfit",fontSize:26,fontWeight:800,marginBottom:16}}>Translation QA</h1>
        <div style={{display:"flex",gap:4,marginBottom:16}}>{TRT.map(function(t,i){return (<button key={i} onClick={function(){setQaT(i)}} style={{padding:"8px 16px",borderRadius:10,border:qaT===i?"1px solid #0891b2":"1px solid #e2e8f0",background:qaT===i?"#0891b210":"#fff",color:qaT===i?"#0891b2":"#64748b",fontSize:10,fontWeight:600,cursor:"pointer"}}>{t.l}</button>)})}</div>
        <P style={{marginBottom:16}}><SL color="#0891b2">Tier: {TRT[qaT].l}</SL>
          <div style={{fontSize:11,color:"#475569"}}>{TRT[qaT].req}</div>
          <div style={{fontSize:10,color:"#059669",marginTop:6}}>Examples: {TRT[qaT].ex.join(", ")}</div>
        </P>
        <div style={{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(200px,1fr))",gap:10}}>
          {QAD.map(function(d,i){return (<P key={i}><div style={{fontSize:12,fontWeight:700,fontFamily:"Outfit",color:"#7c3aed"}}>{d.d}</div><div style={{fontSize:10,color:"#64748b",marginTop:4}}>{d.t}</div></P>)})}
        </div>
      </div>)}

      {tab==="cases" && (<div>
        <h1 style={{fontFamily:"Outfit",fontSize:26,fontWeight:800,marginBottom:4}}>Real Impact</h1>
        <p style={{color:"#64748b",fontSize:11,marginBottom:12}}>21 documented cases of language barrier failures in healthcare. Tap any case for the AI-researched full story from primary sources.</p>
        <div style={{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(120px,1fr))",gap:8,marginBottom:16}}>
          {[{n:cFatal,l:"Fatal",c:"#dc2626"},{n:cCat,l:"Catastrophic",c:"#d97706"},{n:CASES.length,l:"Total Cases",c:"#0891b2"}].map(function(s){return (<P key={s.l} style={{textAlign:"center",padding:12}}><div style={{fontSize:22,fontWeight:900,color:s.c,fontFamily:"Outfit"}}>{s.n}</div><div style={{fontSize:9,color:"#94a3b8",textTransform:"uppercase"}}>{s.l}</div></P>)})}
        </div>
        <div style={{display:"flex",gap:4,marginBottom:16}}>{["all","fatal","catastrophic","severe","systemic"].map(function(s){return pill(s,sevF,setSevF)})}</div>
        <div style={{display:"grid",gap:10}}>
          {filtCases.map(function(cs){var isOpen=drillC===cs.id;var sevC={fatal:"#dc2626",catastrophic:"#d97706",severe:"#7c3aed",systemic:"#0891b2"};var col=sevC[cs.sev]||"#94a3b8";return (<div key={cs.id}>
            <div onClick={function(){setDrillC(isOpen?null:cs.id);setCaseDeep(null)}} style={{padding:16,borderRadius:12,border:"1px solid #e2e8f0",borderLeft:"4px solid "+col,background:isOpen?"#f8fafc":"#fff",cursor:"pointer",transition:"all 0.15s"}}>
              <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:6}}>
                <div style={{flex:1}}><div style={{fontSize:14,fontWeight:800,fontFamily:"Outfit",lineHeight:1.3}}>{cs.icon} {cs.ti}</div><div style={{fontSize:10,color:"#64748b",marginTop:4}}>{cs.yr} | {cs.loc}</div></div>
                <div style={{display:"flex",gap:4,flexShrink:0,marginLeft:8}}><Tag c={col}>{cs.sev}</Tag></div>
              </div>
              <div style={{fontSize:11,color:"#dc2626",fontWeight:700,marginBottom:4}}>{cs.result}</div>
              <div style={{fontSize:11,color:"#475569",lineHeight:1.5}}>{cs.sum}</div>
              {isOpen && (<div className="fade-in" style={{marginTop:12,paddingTop:12,borderTop:"1px solid #e2e8f0"}}>
                <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12}}>
                  <div style={{padding:10,background:"#fef2f2",borderRadius:8}}><div style={{fontSize:9,fontWeight:700,color:"#991b1b",textTransform:"uppercase",letterSpacing:1,marginBottom:4}}>What Went Wrong</div><div style={{fontSize:11,color:"#991b1b",lineHeight:1.6}}>{cs.fail}</div></div>
                  <div style={{padding:10,background:"#f0fdf4",borderRadius:8}}><div style={{fontSize:9,fontWeight:700,color:"#166534",textTransform:"uppercase",letterSpacing:1,marginBottom:4}}>Key Lesson</div><div style={{fontSize:11,color:"#166534",lineHeight:1.6}}>{cs.lesson}</div></div>
                </div>
                {cs.detail && (<div style={{fontSize:11,color:"#475569",lineHeight:1.6,marginBottom:12}}>{cs.detail}</div>)}
                {cs.impact && (<div style={{fontSize:11,color:"#7c3aed",fontWeight:600,marginBottom:8}}>Impact: {cs.impact}</div>)}
                {cs.urls && cs.urls.length > 0 && (<div style={{marginBottom:12}}><div style={{fontSize:9,fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:1,marginBottom:4}}>Sources</div>{cs.urls.map(function(u,i){return (<a key={i} href={u.url} target="_blank" rel="noopener noreferrer" style={{display:"block",fontSize:10,color:"#0891b2",textDecoration:"none",marginBottom:2}}>{u.label || u.url}</a>)})}</div>)}
                <button onClick={function(e){e.stopPropagation();runCaseDeep(cs)}} disabled={caseDeepLoading} style={Object.assign({},abtn,{width:"100%",padding:"10px 16px",background:caseDeepLoading?"#cbd5e1":"linear-gradient(135deg,#0f172a,#1e293b)",color:"#fff",fontSize:11,fontWeight:700,borderRadius:10})}>{caseDeepLoading?"Researching full story...":"Research Full Story from Sources"}</button>
              </div>)}
            </div>
            {isOpen && caseDeepLoading && (<div style={{padding:30,textAlign:"center",background:"#f8fafc",borderRadius:12,border:"1px solid #e2e8f0",marginTop:8}}><div style={{fontSize:14,fontWeight:700,color:"#0891b2",marginBottom:4}}>Researching case...</div><div style={{fontSize:10,color:"#94a3b8"}}>Searching primary sources for the full story</div></div>)}
            {isOpen && caseDeep && !caseDeepLoading && caseDeep.story && (<div className="fade-in" style={{marginTop:8,background:"#fff",borderRadius:16,border:"1px solid #e2e8f0",overflow:"hidden"}}>
              <div style={{background:"linear-gradient(135deg,#0f172a,#1e293b)",padding:20,color:"#fff"}}><div style={{fontSize:18,fontWeight:800,fontFamily:"Outfit"}}>{caseDeep.story.headline || cs.ti}</div>{caseDeep.story.patient && (<div style={{fontSize:11,color:"#94a3b8",marginTop:4}}>Patient: {caseDeep.story.patient}</div>)}{caseDeep.story.settlement && (<div style={{fontSize:12,color:"#fca5a5",fontWeight:700,marginTop:4}}>{caseDeep.story.settlement}</div>)}</div>
              <div style={{padding:20}}>
                {caseDeep.story.whatHappened && (<div style={{marginBottom:16}}><div style={{fontSize:10,fontWeight:700,color:"#0891b2",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>What Happened</div><div style={{fontSize:11,color:"#475569",lineHeight:1.7}}>{caseDeep.story.whatHappened}</div></div>)}
                {caseDeep.story.timeline && caseDeep.story.timeline.length > 0 && (<div style={{marginBottom:16}}><div style={{fontSize:10,fontWeight:700,color:"#7c3aed",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Timeline</div><div style={{borderLeft:"2px solid #7c3aed",paddingLeft:14}}>{caseDeep.story.timeline.map(function(t,i){return (<div key={i} style={{marginBottom:8,position:"relative"}}><div style={{position:"absolute",left:-19,top:4,width:8,height:8,borderRadius:4,background:"#7c3aed"}}></div><div style={{fontSize:9,fontWeight:700,color:"#7c3aed"}}>{t.date}</div><div style={{fontSize:11,color:"#475569"}}>{t.event}</div></div>)})}</div></div>)}
                {caseDeep.story.languageBarrier && (<div style={{marginBottom:16,padding:14,background:"#fef2f2",borderRadius:10,border:"1px solid #fca5a5"}}><div style={{fontSize:10,fontWeight:700,color:"#991b1b",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>The Language Barrier</div><div style={{fontSize:11,color:"#991b1b",lineHeight:1.7}}>{caseDeep.story.languageBarrier}</div></div>)}
                {caseDeep.story.medicalConsequence && (<div style={{marginBottom:16}}><div style={{fontSize:10,fontWeight:700,color:"#dc2626",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Medical Consequence</div><div style={{fontSize:11,color:"#475569",lineHeight:1.7}}>{caseDeep.story.medicalConsequence}</div></div>)}
                {caseDeep.story.legalOutcome && (<div style={{marginBottom:16}}><div style={{fontSize:10,fontWeight:700,color:"#d97706",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Legal Outcome</div><div style={{fontSize:11,color:"#475569",lineHeight:1.7}}>{caseDeep.story.legalOutcome}</div></div>)}
                {caseDeep.story.systemicFailures && caseDeep.story.systemicFailures.length > 0 && (<div style={{marginBottom:16}}><div style={{fontSize:10,fontWeight:700,color:"#dc2626",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Systemic Failures</div><div style={{display:"grid",gap:4}}>{caseDeep.story.systemicFailures.map(function(f,i){return (<div key={i} style={{display:"flex",gap:8,fontSize:11,color:"#991b1b"}}><span style={{fontWeight:700}}>!</span>{f}</div>)})}</div></div>)}
                {caseDeep.story.whatChanged && (<div style={{marginBottom:16,padding:14,background:"#f0fdf4",borderRadius:10,border:"1px solid #bbf7d0"}}><div style={{fontSize:10,fontWeight:700,color:"#166534",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>What Changed After</div><div style={{fontSize:11,color:"#166534",lineHeight:1.7}}>{caseDeep.story.whatChanged}</div></div>)}
                {caseDeep.story.quotesFromCase && caseDeep.story.quotesFromCase.length > 0 && (<div style={{marginBottom:16}}><div style={{fontSize:10,fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Notable Quotes</div>{caseDeep.story.quotesFromCase.map(function(q,i){return (<div key={i} style={{padding:10,background:"#f8fafc",borderLeft:"3px solid #0891b2",borderRadius:4,marginBottom:6,fontSize:11,color:"#475569",fontStyle:"italic"}}>{q}</div>)})}</div>)}
                {caseDeep.story.similarCases && caseDeep.story.similarCases.length > 0 && (<div style={{marginBottom:16}}><div style={{fontSize:10,fontWeight:700,color:"#0891b2",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Similar Cases</div><div style={{display:"grid",gap:6}}>{caseDeep.story.similarCases.map(function(sc,i){return (<div key={i} style={{padding:10,borderRadius:8,border:"1px solid #e2e8f0"}}><div style={{fontSize:11,fontWeight:700}}>{sc.title} ({sc.year})</div><div style={{fontSize:10,color:"#64748b"}}>{sc.relevance}</div></div>)})}</div></div>)}
                {caseDeep.story.advocateHealthRelevance && (<div style={{marginBottom:16,padding:14,background:"#0f172a",borderRadius:10}}><div style={{fontSize:10,fontWeight:700,color:"#0891b2",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Advocate Health Relevance</div><div style={{fontSize:11,color:"#cbd5e1",lineHeight:1.7}}>{caseDeep.story.advocateHealthRelevance}</div></div>)}
                {caseDeep.story.lessonsForLeadership && (<div style={{padding:14,background:"#fffbeb",borderRadius:10,border:"1px solid #fde68a"}}><div style={{fontSize:10,fontWeight:700,color:"#92400e",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Lessons for Leadership</div><div style={{fontSize:11,color:"#78350f",lineHeight:1.7}}>{caseDeep.story.lessonsForLeadership}</div></div>)}
                {caseDeep.sources && caseDeep.sources.length > 0 && (<div style={{marginTop:16,paddingTop:12,borderTop:"1px solid #e2e8f0"}}><div style={{fontSize:9,fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:1,marginBottom:4}}>Research Sources</div>{caseDeep.sources.map(function(s,i){return (<a key={i} href={s.url} target="_blank" rel="noopener noreferrer" style={{display:"block",fontSize:10,color:"#0891b2",textDecoration:"none",marginBottom:2}}>{s.title}</a>)})}</div>)}
              </div>
            </div>)}
          </div>)})}
        </div>
      </div>)}

      {tab==="research" && (<div>
        <h1 style={{fontFamily:"Outfit",fontSize:26,fontWeight:800,marginBottom:4}}>Research Library</h1>
        <p style={{color:"#64748b",fontSize:11,marginBottom:16}}>Peer-reviewed studies on language access, patient safety, and interpreter effectiveness. Tap to expand.</p>
        <div style={{display:"grid",gap:10}}>
          {ORES.map(function(r){var exp=drillR===r.id;var cc={outcomes:"#059669",safety:"#dc2626",cost:"#d97706",quality:"#0891b2",equity:"#7c3aed"};var col=cc[r.ca]||"#94a3b8";return (<div key={r.id} onClick={function(){setDrillR(exp?null:r.id)}} style={{padding:16,borderRadius:12,border:"1px solid #e2e8f0",borderLeft:"4px solid "+col,background:exp?"#f8fafc":"#fff",cursor:"pointer",transition:"all 0.15s"}}>
            <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:6}}>
              <div style={{flex:1}}><div style={{fontSize:14,fontWeight:800,fontFamily:"Outfit",color:"#0f172a",lineHeight:1.3}}>{r.ti}</div><div style={{fontSize:10,color:"#64748b",marginTop:4}}>{r.au}</div></div>
              <div style={{display:"flex",gap:4,flexShrink:0,marginLeft:8}}><Tag c={col}>{r.ca}</Tag><Tag c="#64748b">{r.yr}</Tag></div>
            </div>
            {exp && (<div className="fade-in" style={{marginTop:12,paddingTop:12,borderTop:"1px solid #e2e8f0"}}>
              <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12}}>
                <div><div style={{fontSize:9,fontWeight:700,color:"#7c3aed",textTransform:"uppercase",letterSpacing:1,marginBottom:4}}>Key Findings</div><div style={{fontSize:11,color:"#475569",lineHeight:1.6,padding:10,background:"#f0f9ff",borderRadius:8}}>{r.fi}</div></div>
                <div><div style={{fontSize:9,fontWeight:700,color:"#059669",textTransform:"uppercase",letterSpacing:1,marginBottom:4}}>Methodology</div><div style={{fontSize:11,color:"#475569",lineHeight:1.6,padding:10,background:"#f0fdf4",borderRadius:8}}>{r.me}</div></div>
              </div>
              <div style={{display:"flex",gap:12,fontSize:10,color:"#64748b"}}>
                <div><span style={{fontWeight:700}}>Journal:</span> {r.jn}</div>
                <div><span style={{fontWeight:700}}>Volume:</span> {r.vol}</div>
                <div><span style={{fontWeight:700}}>Sample:</span> {r.n}</div>
              </div>
              {r.doi && (<a href={"https://doi.org/"+r.doi} target="_blank" rel="noopener noreferrer" style={{display:"inline-block",marginTop:8,fontSize:10,color:"#0891b2",textDecoration:"none",fontWeight:600}}>DOI: {r.doi}</a>)}
            </div>)}
          </div>)})}
        </div>
      </div>)}

      {tab==="forecast" && (<div>
        <h1 style={{fontFamily:"Outfit",fontSize:26,fontWeight:800,marginBottom:4}}>Demographic Forecasting</h1>
        <p style={{color:"#64748b",fontSize:11,marginBottom:16}}>LEP population projections 2024-2030 across Advocate Health's 6-state footprint. Tap a state to drill down.</p>
        <div style={{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gap:10,marginBottom:16}}>
          <P style={{textAlign:"center",background:"linear-gradient(135deg,#f8fafc,#f0f9ff)"}}><div style={{fontSize:9,color:"#94a3b8",textTransform:"uppercase",letterSpacing:1}}>Total LEP 2024</div><div style={{fontSize:28,fontWeight:900,fontFamily:"Outfit"}}>{(tl24/1e6).toFixed(2)}M</div></P>
          <P style={{textAlign:"center",background:"linear-gradient(135deg,#f0f9ff,#f0fdf4)"}}><div style={{fontSize:9,color:"#94a3b8",textTransform:"uppercase",letterSpacing:1}}>Projected 2030</div><div style={{fontSize:28,fontWeight:900,color:"#0891b2",fontFamily:"Outfit"}}>{(tl30/1e6).toFixed(2)}M</div></P>
          <P style={{textAlign:"center",background:"linear-gradient(135deg,#f0fdf4,#fefce8)"}}><div style={{fontSize:9,color:"#94a3b8",textTransform:"uppercase",letterSpacing:1}}>Growth</div><div style={{fontSize:28,fontWeight:900,color:"#059669",fontFamily:"Outfit"}}>+{((tl30-tl24)/tl24*100).toFixed(1)}%</div></P>
        </div>
        <div style={{display:"grid",gap:10}}>
          {DEMOP.map(function(d){var isOpen=dFc===d.st;return (<div key={d.st} onClick={function(){setDFc(isOpen?null:d.st)}} style={{padding:16,borderRadius:12,border:"1px solid #e2e8f0",borderLeft:"3px solid #0891b2",background:isOpen?"#f8fafc":"#fff",cursor:"pointer",transition:"all 0.15s"}}>
            <div style={{display:"flex",justifyContent:"space-between",alignItems:"center"}}>
              <div style={{fontSize:16,fontWeight:800,fontFamily:"Outfit"}}>{d.st}</div>
              <div style={{display:"flex",gap:8,alignItems:"center"}}><div style={{textAlign:"right"}}><div style={{fontSize:9,color:"#94a3b8"}}>2024</div><div style={{fontSize:14,fontWeight:700}}>{(d.l24/1e3).toFixed(0)}K</div></div><div style={{fontSize:16,color:"#0891b2",fontWeight:300}}>-&gt;</div><div style={{textAlign:"right"}}><div style={{fontSize:9,color:"#94a3b8"}}>2030</div><div style={{fontSize:14,fontWeight:700,color:"#0891b2"}}>{(d.l30/1e3).toFixed(0)}K</div></div><Tag c="#059669">{(d.g*100).toFixed(1)}%</Tag></div>
            </div>
            {isOpen && (<div className="fade-in" style={{marginTop:14,paddingTop:14,borderTop:"1px solid #e2e8f0"}}>
              <div style={{marginBottom:12}}><div style={{fontSize:9,fontWeight:700,color:"#7c3aed",textTransform:"uppercase",letterSpacing:1,marginBottom:8}}>Top Languages</div>
                <div style={{display:"grid",gap:4}}>{d.langs.map(function(lg){var barW=lg.a;var tColor=lg.t==="rapid"?"#059669":lg.t==="stable"?"#0891b2":"#d97706";return (<div key={lg.l} style={{display:"flex",alignItems:"center",gap:8}}><div style={{width:80,fontSize:10,fontWeight:600,flexShrink:0}}>{lg.l}</div><div style={{flex:1,height:18,background:"#f1f5f9",borderRadius:4,overflow:"hidden",position:"relative"}}><div style={{width:barW+"%",height:"100%",background:"linear-gradient(90deg,#0891b2,#7c3aed)",borderRadius:4,transition:"width 0.5s"}}></div><span style={{position:"absolute",right:6,top:2,fontSize:9,fontWeight:700}}>{lg.a}%</span></div><div style={{fontSize:9,color:tColor,fontWeight:600,width:60,flexShrink:0}}>{lg.t}</div></div>)})}</div>
              </div>
              {d.ref && (<div style={{padding:10,background:"#fffbeb",borderRadius:8,border:"1px solid #fde68a"}}><div style={{fontSize:9,fontWeight:700,color:"#92400e",marginBottom:2}}>Refugee Intake</div><div style={{fontSize:11,color:"#78350f"}}>{d.ref.yr.toLocaleString()} refugees/yr from {(d.ref.from||[]).join(", ")}</div></div>)}
            </div>)}
          </div>)})}
        </div>
      </div>)}



      {tab==="auxaids" && (<div>
        <h1 style={{fontFamily:"Outfit",fontSize:26,fontWeight:800,marginBottom:4}}>Auxiliary Aids & Services</h1>
        <p style={{color:"#64748b",fontSize:11,marginBottom:16}}>Complete guide to communication aids required under ADA, Title VI, and ACA 1557. Tap any aid for full details, training protocols, and compliance requirements.</p>
        <div style={{display:"flex",gap:4,flexWrap:"wrap",marginBottom:16}}>{AID_CATS.map(function(cat){return (<button key={cat.id} onClick={function(){setAidCat(cat.id);setSelAid(null)}} style={{padding:"6px 14px",borderRadius:8,border:aidCat===cat.id?"1px solid #0891b2":"1px solid #e2e8f0",background:aidCat===cat.id?"#0891b2":"#fff",color:aidCat===cat.id?"#fff":"#64748b",fontSize:10,fontWeight:600,cursor:"pointer"}}>{cat.lb}</button>)})}</div>
        <div style={{display:"grid",gap:10}}>
          {AIDS.filter(function(a){return aidCat==="all"||a.cat===aidCat}).map(function(aid){var isOpen=selAid===aid.id;var catColors={interpretation:"#0891b2",written:"#7c3aed",personnel:"#059669",accessibility:"#d97706",tools:"#64748b"};var col=catColors[aid.cat]||"#94a3b8";return (<div key={aid.id}>
            <div onClick={function(){setSelAid(isOpen?null:aid.id)}} style={{padding:16,borderRadius:12,border:isOpen?"2px solid "+col:"1px solid #e2e8f0",borderLeft:"4px solid "+col,background:isOpen?"#f8fafc":"#fff",cursor:"pointer",transition:"all 0.15s"}}>
              <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}}>
                <div style={{flex:1}}><div style={{display:"flex",gap:8,alignItems:"center",marginBottom:4}}><div style={{width:28,height:28,borderRadius:8,background:col+"15",color:col,display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:900}}>{aid.icon}</div><div style={{fontSize:15,fontWeight:800,fontFamily:"Outfit"}}>{aid.name}</div></div><div style={{fontSize:11,color:"#475569",lineHeight:1.5}}>{aid.desc}</div></div>
                <Tag c={col}>{AID_CATS.filter(function(x){return x.id===aid.cat})[0].lb}</Tag>
              </div>
            </div>
            {isOpen && (<div className="fade-in" style={{marginTop:8,background:"#fff",borderRadius:16,border:"1px solid #e2e8f0",overflow:"hidden"}}>
              <div style={{background:"linear-gradient(135deg,"+col+","+col+"cc)",padding:20,color:"#fff"}}><div style={{fontSize:20,fontWeight:800,fontFamily:"Outfit"}}>{aid.name}</div>{aid.metrics && (<div style={{display:"flex",gap:16,marginTop:8}}>{Object.keys(aid.metrics).map(function(k){return (<div key={k}><div style={{fontSize:9,color:"rgba(255,255,255,0.7)",textTransform:"uppercase"}}>{k}</div><div style={{fontSize:13,fontWeight:700}}>{aid.metrics[k]}</div></div>)})}</div>)}</div>
              <div style={{padding:20}}>
                <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:16}}>
                  <div><div style={{fontSize:10,fontWeight:700,color:"#0891b2",textTransform:"uppercase",letterSpacing:1.5,marginBottom:8}}>When to Use</div><div style={{display:"grid",gap:4}}>{aid.when.map(function(w,i){return (<div key={i} style={{display:"flex",gap:8,alignItems:"flex-start",fontSize:11,color:"#475569"}}><span style={{color:"#0891b2",fontWeight:700,flexShrink:0}}>+</span>{w}</div>)})}</div></div>
                  <div><div style={{fontSize:10,fontWeight:700,color:"#dc2626",textTransform:"uppercase",letterSpacing:1.5,marginBottom:8}}>Common Pitfalls</div><div style={{display:"grid",gap:4}}>{aid.pitfalls.map(function(p,i){return (<div key={i} style={{display:"flex",gap:8,alignItems:"flex-start",fontSize:11,color:"#991b1b"}}><span style={{fontWeight:700,flexShrink:0}}>X</span>{p}</div>)})}</div></div>
                </div>
                <div style={{marginBottom:16,padding:16,background:"#fffbeb",borderRadius:10,border:"1px solid #fde68a"}}><div style={{fontSize:10,fontWeight:700,color:"#92400e",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6}}>Why This Matters</div><div style={{fontSize:11,color:"#78350f",lineHeight:1.7}}>{aid.importance}</div></div>
                <div style={{marginBottom:16}}><div style={{fontSize:10,fontWeight:700,color:"#059669",textTransform:"uppercase",letterSpacing:1.5,marginBottom:8}}>Staff Training Protocol</div><div style={{display:"grid",gap:4}}>{aid.training.map(function(t,i){return (<div key={i} style={{display:"flex",gap:8,alignItems:"flex-start",fontSize:11,color:"#475569"}}><span style={{color:"#059669",fontWeight:700,flexShrink:0,width:16}}>{i+1}.</span>{t}</div>)})}</div></div>
                <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12}}>
                  <div style={{padding:12,background:"#f8fafc",borderRadius:10}}><div style={{fontSize:9,fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:1,marginBottom:4}}>Requirements</div><div style={{fontSize:10,color:"#0f172a",lineHeight:1.5}}>{aid.reqs}</div></div>
                  <div style={{padding:12,background:"#f0f9ff",borderRadius:10}}><div style={{fontSize:9,fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:1,marginBottom:4}}>Compliance</div><div style={{fontSize:10,color:"#0f172a",lineHeight:1.5}}>{aid.compliance}</div></div>
                </div>
              </div>
            </div>)}
          </div>)})}
        </div>
      </div>)}

      {tab==="cchi" && (<div>
        <div style={{marginBottom:16}}><h1 style={{fontFamily:"Outfit",fontSize:26,fontWeight:800,color:"#0f172a",marginBottom:4}}>CCHI Interpreter Registry</h1><p style={{color:"#64748b",fontSize:11}}>Search the national CCHI certified healthcare interpreter registry. Credentials: CoreCHI, CoreCHI-P, CHI (Spanish/Arabic/Mandarin).</p></div>

        <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:16}}>
          <P style={{background:"linear-gradient(135deg,#eff6ff,#f0fdf4)"}}>
            <SL color="#0891b2">AI-Powered Search</SL>
            <div style={{fontSize:10,color:"#64748b",marginBottom:8}}>Uses Claude + web search to find CCHI-certified interpreters by state, language, or name from the public registry.</div>
            <div style={{display:"flex",gap:8,marginBottom:8}}><input ref={cchiQRef} defaultValue={cchiQ} onKeyDown={function(e){if(e.key==="Enter"){setCchiQ(e.target.value);runCchiAgent(e.target.value)}}} placeholder="e.g. Spanish interpreters in Illinois (Enter)" style={{flex:1,padding:"10px 14px",borderRadius:8,border:"1px solid #e2e8f0",fontSize:12,fontFamily:"monospace",outline:"none"}}/><button onClick={function(){var v=cchiQRef.current?cchiQRef.current.value:cchiQ;setCchiQ(v);runCchiAgent(v)}} disabled={cchiLoading} style={Object.assign({},abtn,{background:cchiLoading?"#cbd5e1":"#0891b2",color:"#fff"})}>{cchiLoading?"Searching...":"Search"}</button></div>
            <div style={{display:"flex",flexWrap:"wrap",gap:4}}>
              {["CCHI interpreters Illinois","CCHI interpreters North Carolina","CCHI Spanish certified Wisconsin","CCHI Arabic interpreters Georgia","CoreCHI-P South Carolina","CCHI Mandarin interpreters Alabama"].map(function(s){return chip(s,function(v){setCchiQ(v);if(cchiQRef.current)cchiQRef.current.value=v;runCchiAgent(v)})})}
            </div>
          </P>
          <P style={{background:"#0f172a",color:"#fff"}}>
            <div style={{fontSize:11,fontWeight:700,color:"#0891b2",letterSpacing:1.5,textTransform:"uppercase",marginBottom:10}}>Direct Registry Access</div>
            <div style={{fontSize:10,color:"#94a3b8",marginBottom:12}}>Search the official CCHI National Healthcare Interpreter Registry directly. Filter by name, state (use abbreviations: IL, WI, NC, SC, GA, AL), or language.</div>
            <a href="https://cchi.learningbuilder.com/Search/Public/MemberRole/Registry" target="_blank" rel="noopener noreferrer" style={{display:"block",textAlign:"center",padding:"12px 20px",borderRadius:8,background:"#0891b2",color:"#fff",textDecoration:"none",fontSize:12,fontWeight:700,fontFamily:"monospace",marginBottom:8}}>Open CCHI Registry</a>
            <a href="https://cchi.learningbuilder.com/Public/MemberSearch/Search" target="_blank" rel="noopener noreferrer" style={{display:"block",textAlign:"center",padding:"12px 20px",borderRadius:8,background:"transparent",color:"#0891b2",textDecoration:"none",fontSize:12,fontWeight:700,fontFamily:"monospace",border:"1px solid #0891b2"}}>CCHI Member Search</a>
            <div style={{marginTop:10,display:"flex",flexWrap:"wrap",gap:4}}>
              {["IL","WI","NC","SC","GA","AL"].map(function(st){return (<a key={st} href={"https://cchi.learningbuilder.com/Search/Public/MemberRole/Registry"} target="_blank" rel="noopener noreferrer" style={{padding:"4px 10px",borderRadius:6,background:"#1e293b",color:"#0891b2",textDecoration:"none",fontSize:10,fontWeight:600,border:"1px solid #334155"}}>{st}</a>)})}
            </div>
          </P>
        </div>

        {cchiLoading && (<P style={{textAlign:"center",padding:30}}><div style={{fontSize:13,fontWeight:700,color:"#0891b2"}}>Searching CCHI Registry...</div><div style={{fontSize:10,color:"#94a3b8",marginTop:4}}>Querying certified interpreter database via web search</div></P>)}

        {cchiR && (<div>
          {cchiR.totalFound > 0 && (<div style={{fontSize:11,color:"#059669",fontWeight:600,marginBottom:8}}>{cchiR.totalFound} interpreter(s) found</div>)}
          {cchiR.interpreters && cchiR.interpreters.length > 0 && (<div style={{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(280px,1fr))",gap:8,marginBottom:12}}>
            {cchiR.interpreters.map(function(interp,i){var sv=cchiSaved.some(function(x){return x.name===interp.name&&x.credential===interp.credential});return (<P key={i} style={{borderLeft:"3px solid #0891b2"}}>
              <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}}>
                <div><div style={{fontSize:13,fontWeight:800,fontFamily:"Outfit"}}>{interp.name}</div>
                  <div style={{display:"flex",gap:4,marginTop:4,flexWrap:"wrap"}}>
                    {interp.credential && (<Tag c="#0891b2">{interp.credential}</Tag>)}
                    {interp.language && (<Tag c="#7c3aed">{interp.language}</Tag>)}
                    {interp.state && (<Tag c="#059669">{interp.state}</Tag>)}
                    {interp.status && (<Tag c={interp.status==="Active"?"#059669":"#d97706"}>{interp.status}</Tag>)}
                  </div>
                </div>
                <button onClick={function(e){e.stopPropagation();if(!sv)saveCchi(interp)}} style={Object.assign({},abtn,{padding:"4px 10px",background:sv?"#f0fdf4":"#059669",color:sv?"#059669":"#fff",fontSize:9})}>{sv?"Saved":"+ Save"}</button>
              </div>
              {interp.email && (<div style={{fontSize:10,color:"#0891b2",marginTop:6}}>{interp.email}</div>)}
            </P>)})}
          </div>)}
          {cchiR.registryNote && (<P style={{background:"#f0f9ff",borderColor:"#0891b220"}}><div style={{fontSize:10,color:"#0891b2"}}>{cchiR.registryNote}</div></P>)}
          {cchiR.searchTip && (<div style={{fontSize:10,color:"#64748b",fontStyle:"italic",marginTop:6}}>{cchiR.searchTip}</div>)}
        </div>)}

        {cchiSaved.length > 0 && (<P style={{marginTop:12}}><SL color="#0891b2">Saved CCHI Interpreters ({cchiSaved.length})</SL>
          {cchiSaved.map(function(interp,i){return (<div key={i} style={{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 0",borderBottom:"1px solid #f1f5f9"}}>
            <div><span style={{fontSize:11,fontWeight:700}}>{interp.name}</span> <Tag c="#0891b2">{interp.credential}</Tag> <Tag c="#7c3aed">{interp.language}</Tag> <Tag c="#059669">{interp.state}</Tag></div>
            <button onClick={function(){var nc=cchiSaved.filter(function(_,j){return j!==i});setCchiSaved(nc);persist("ll_cchi",nc)}} style={{fontSize:9,color:"#dc2626",background:"none",border:"none",cursor:"pointer"}}>Remove</button>
          </div>)})}
        </P>)}

        <P style={{marginTop:12,background:"#fffbeb",borderColor:"#fde68a"}}><div style={{fontSize:10,color:"#92400e"}}><span style={{fontWeight:700}}>About CCHI Credentials:</span> CoreCHI = knowledge-based (all languages). CoreCHI-P = performance-based (all languages). CHI = full oral performance certification (Spanish, Arabic, Mandarin). NCCA-accredited, the only accredited interpreter certifications in the U.S.</div></P>
      </div>)}

      {tab==="agents" && (<div>
        <div style={{marginBottom:20}}><h1 style={{fontFamily:"Outfit",fontSize:26,fontWeight:800,color:"#0f172a",marginBottom:4}}>AI Agents</h1><p style={{color:"#94a3b8",fontSize:12}}>Autonomous research, compliance, and strategic planning powered by Claude. Saved results persist across sessions.</p></div>
        <div style={{display:"flex",gap:6,marginBottom:16,flexWrap:"wrap"}}>{ATABS.map(function(at){return (<button key={at.id} onClick={function(){setAgentTab(at.id)}} style={{padding:"8px 16px",borderRadius:10,border:agentTab===at.id?"1px solid #0891b2":"1px solid #e2e8f0",background:agentTab===at.id?"#0891b210":"#fff",color:agentTab===at.id?"#0891b2":"#64748b",fontSize:11,fontWeight:600,cursor:"pointer",fontFamily:"monospace"}}><span style={{marginRight:6}}>{at.ic}</span>{at.lb}</button>)})}</div>

        {agentTab==="case-finder" && (<div>
          <P style={{marginBottom:16}}><SL color="#dc2626">Case Research Agent</SL>
            <div style={{fontSize:10,color:"#64748b",marginBottom:10}}>Searches the web for real documented cases of language barrier failures, analyzes them, and lets you save them to your library.</div>
            <div style={{display:"flex",gap:8,marginBottom:8}}><input ref={agentQRef} defaultValue={agentQ} onKeyDown={function(e){if(e.key==="Enter"){setAgentQ(e.target.value);runCaseAgent(e.target.value)}}} placeholder="Search for cases... (press Enter)" style={{flex:1,padding:"10px 14px",borderRadius:8,border:"1px solid #e2e8f0",fontSize:12,fontFamily:"monospace",outline:"none"}}/><button onClick={function(){var v=agentQRef.current?agentQRef.current.value:agentQ;setAgentQ(v);runCaseAgent(v)}} disabled={agentLoading} style={Object.assign({},abtn,{background:agentLoading?"#cbd5e1":"#dc2626",color:"#fff"})}>{agentLoading?"Searching...":"Research"}</button></div>
            <div style={{display:"flex",flexWrap:"wrap",gap:4}}>{["LEP patient death lawsuit 2024","Arabic dialect misdiagnosis","child medical interpreter case","Somali refugee language barrier","ASL deaf patient malpractice","discharge instructions harm"].map(function(s){return chip(s,function(v){setAgentQ(v);if(agentQRef.current)agentQRef.current.value=v;runCaseAgent(v)})})}</div>
          </P>
          {agentLoading && (<P style={{textAlign:"center",padding:30}}><div style={{fontSize:13,fontWeight:700,color:"#0891b2"}}>üîç Agent researching the web...</div><div style={{fontSize:10,color:"#94a3b8",marginTop:4}}>Searching, analyzing sources, extracting case details</div></P>)}
          {agentR && agentR.cases && agentR.cases.map(function(c,i){var sv=savedCases.some(function(x){return x.title===c.title});return (<P key={i} style={{borderLeft:"4px solid "+(sevC[c.severity]||"#94a3b8"),marginBottom:8}}>
            <div style={{display:"flex",justifyContent:"space-between",marginBottom:6}}><div><div style={{fontSize:14,fontWeight:800,fontFamily:"Outfit"}}>{c.title}</div><div style={{display:"flex",gap:4,marginTop:4,flexWrap:"wrap"}}>{c.year&&(<Tag c="#64748b">{c.year}</Tag>)}{c.location&&(<Tag c="#64748b">{c.location}</Tag>)}{c.severity&&(<Tag c={sevC[c.severity]}>{c.severity}</Tag>)}{c.result&&(<Tag c="#0891b2">{c.result}</Tag>)}</div></div>
              <button onClick={function(e){e.stopPropagation();if(!sv)saveCaseA(c)}} style={Object.assign({},abtn,{padding:"4px 10px",background:sv?"#f0fdf4":"#059669",color:sv?"#059669":"#fff",fontSize:9})}>{sv?"\u2713 Saved":"+ Save"}</button></div>
            <div style={{fontSize:11,color:"#475569",lineHeight:1.6,marginBottom:6}}>{c.summary}</div>
            {c.whatWentWrong && (<div style={{fontSize:10,color:"#dc2626",background:"#fef2f2",padding:10,borderRadius:6,marginBottom:4}}>{c.whatWentWrong}</div>)}
            {c.keyLesson && (<div style={{fontSize:10,color:"#065f46",background:"#f0fdf4",padding:10,borderRadius:6,marginBottom:4}}>{c.keyLesson}</div>)}
            {c.sourceUrl && (<a href={c.sourceUrl} target="_blank" rel="noopener noreferrer" style={{fontSize:9,color:"#0891b2",textDecoration:"none"}}>\u2197 Source</a>)}
          </P>)})}
          {agentR && agentR.note && (<div style={{fontSize:10,color:"#0891b2",marginTop:8,fontStyle:"italic"}}>{agentR.note}</div>)}
        </div>)}

        {agentTab==="compliance" && (<div>
          <P style={{marginBottom:16}}><SL color="#3b82f6">Compliance Advisor Agent</SL>
            <div style={{fontSize:10,color:"#64748b",marginBottom:10}}>Ask about Title VI, ACA Section 1557, Joint Commission, CMS, and state-specific regulations. Uses web search for current information.</div>
            <div style={{display:"flex",gap:8,marginBottom:8}}><input ref={compQRef} defaultValue={compQ} onKeyDown={function(e){if(e.key==="Enter"){setCompQ(e.target.value);runCompAgent(e.target.value)}}} placeholder="Ask compliance questions... (press Enter)" style={{flex:1,padding:"10px 14px",borderRadius:8,border:"1px solid #e2e8f0",fontSize:12,fontFamily:"monospace",outline:"none"}}/><button onClick={function(){var v=compQRef.current?compQRef.current.value:compQ;setCompQ(v);runCompAgent(v)}} disabled={compLoading} style={Object.assign({},abtn,{background:compLoading?"#cbd5e1":"#3b82f6",color:"#fff"})}>{compLoading?"Analyzing...":"Advise"}</button></div>
            <div style={{display:"flex",flexWrap:"wrap",gap:4}}>{["ACA Section 1557 2024 update","Title VI interpreter requirements","Joint Commission standards","Alabama no damages cap","CMS interpreter reimbursement","AI translation compliance"].map(function(s){return chip(s,function(v){setCompQ(v);if(compQRef.current)compQRef.current.value=v;runCompAgent(v)})})}</div>
          </P>
          {compLoading && (<P style={{textAlign:"center",padding:30}}><div style={{fontSize:13,fontWeight:700,color:"#3b82f6"}}>‚öñ Analyzing regulations...</div></P>)}
          {compR && compR.analysis && (<div>
            <P style={{marginBottom:10,borderLeft:"4px solid "+({critical:"#dc2626",high:"#d97706",medium:"#0891b2",low:"#059669"}[compR.analysis.riskLevel]||"#94a3b8")}}>
              <div style={{display:"flex",justifyContent:"space-between",marginBottom:6}}><div style={{fontSize:14,fontWeight:800,fontFamily:"Outfit"}}>Analysis</div><Tag c={{critical:"#dc2626",high:"#d97706",medium:"#0891b2",low:"#059669"}[compR.analysis.riskLevel]}>RISK: {compR.analysis.riskLevel}</Tag></div>
              <div style={{fontSize:11,color:"#475569",lineHeight:1.6}}>{compR.analysis.summary}</div>
              <button onClick={function(){saveIns(compR.analysis.summary,"compliance")}} style={Object.assign({},abtn,{padding:"4px 10px",background:"#f0fdf4",color:"#059669",border:"1px solid #bbf7d0",fontSize:9,marginTop:8})}>Save Insight</button>
            </P>
            {compR.analysis.regulations && compR.analysis.regulations.length>0 && (<P style={{marginBottom:10}}><SL color="#7c3aed">Regulations</SL>{compR.analysis.regulations.map(function(r,i){return (<div key={i} style={{padding:10,borderRadius:8,background:"#f8fafc",border:"1px solid #e2e8f0",marginBottom:4}}><div style={{fontSize:11,fontWeight:700}}>{r.name}</div><div style={{fontSize:10,color:"#475569"}}>{r.requirement}</div></div>)})}</P>)}
            {compR.analysis.recommendations && compR.analysis.recommendations.length>0 && (<P style={{marginBottom:10}}><SL color="#059669">Recommendations</SL>{compR.analysis.recommendations.map(function(r,i){return (<div key={i} style={{padding:10,borderRadius:8,background:"#f0fdf4",border:"1px solid #bbf7d0",marginBottom:4}}><div style={{fontSize:11,fontWeight:700,color:"#065f46"}}>{i+1}. {r.action}</div><div style={{fontSize:10,color:"#64748b"}}>{r.rationale} {r.timeline&&(<span style={{color:"#059669"}}>({r.timeline})</span>)}</div></div>)})}</P>)}
            {compR.analysis.stateNotes && compR.analysis.stateNotes.length>0 && (<P><SL color="#d97706">State Notes</SL><div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:6}}>{compR.analysis.stateNotes.map(function(s,i){return (<div key={i} style={{padding:8,borderRadius:6,background:"#fffbeb",border:"1px solid #fde68a"}}><div style={{fontSize:10,fontWeight:700,color:"#92400e"}}>{s.state}</div><div style={{fontSize:10,color:"#78350f"}}>{s.note}</div></div>)})}</div></P>)}
            {compR.sources && compR.sources.length>0 && (<div style={{display:"flex",flexWrap:"wrap",gap:4,marginTop:8}}>{compR.sources.map(function(s,i){return (<a key={i} href={s.url} target="_blank" rel="noopener noreferrer" style={{fontSize:9,padding:"3px 8px",borderRadius:10,background:"#0891b208",color:"#0891b2",textDecoration:"none"}}>\u2197 {s.title}</a>)})}</div>)}
          </div>)}
        </div>)}

        {agentTab==="planner" && (<div>
          <P style={{marginBottom:16}}><SL color="#059669">Strategic Planner Agent</SL>
            <div style={{fontSize:10,color:"#64748b",marginBottom:10}}>Generate operational plans, workforce strategies, ROI analyses, and vendor management roadmaps. Knows your org structure, vendors, and growth data.</div>
            <div style={{display:"flex",gap:8,marginBottom:8}}><input ref={planQRef} defaultValue={planQ} onKeyDown={function(e){if(e.key==="Enter"){setPlanQ(e.target.value);runPlanAgent(e.target.value)}}} placeholder="Describe what you need... (press Enter)" style={{flex:1,padding:"10px 14px",borderRadius:8,border:"1px solid #e2e8f0",fontSize:12,fontFamily:"monospace",outline:"none"}}/><button onClick={function(){var v=planQRef.current?planQRef.current.value:planQ;setPlanQ(v);runPlanAgent(v)}} disabled={planLoading} style={Object.assign({},abtn,{background:planLoading?"#cbd5e1":"#059669",color:"#fff"})}>{planLoading?"Planning...":"Generate"}</button></div>
            <div style={{display:"flex",flexWrap:"wrap",gap:4}}>{["Reduce OPI vendor spend 15%","Hire 20 interpreters Southeast","Bilingual certification program","AI translation pilot Tier 3","Karen Chin recruitment NC","Disaster language access plan"].map(function(s){return chip(s,function(v){setPlanQ(v);if(planQRef.current)planQRef.current.value=v;runPlanAgent(v)})})}</div>
          </P>
          {planLoading && (<P style={{textAlign:"center",padding:30}}><div style={{fontSize:13,fontWeight:700,color:"#059669"}}>üìã Generating strategic plan...</div></P>)}
          {planR && planR.plan && (<div>
            <P style={{marginBottom:10,background:"linear-gradient(135deg,#f0fdf4,#f0f9ff)"}}><div style={{fontSize:16,fontWeight:800,fontFamily:"Outfit"}}>{planR.plan.title}</div>{planR.plan.timeframe&&(<div style={{fontSize:10,color:"#059669",fontWeight:600}}>{planR.plan.timeframe}</div>)}<div style={{fontSize:11,color:"#475569",lineHeight:1.6,marginTop:6}}>{planR.plan.summary}</div><button onClick={function(){saveIns(planR.plan.title+": "+planR.plan.summary,"plan")}} style={Object.assign({},abtn,{padding:"4px 10px",background:"#f0fdf4",color:"#059669",border:"1px solid #bbf7d0",fontSize:9,marginTop:6})}>Save Plan</button></P>
            {planR.plan.phases&&planR.plan.phases.length>0&&(<P style={{marginBottom:10}}><SL color="#0891b2">Phases</SL>{planR.plan.phases.map(function(ph,i){return (<div key={i} style={{marginBottom:10,padding:12,borderRadius:8,background:"#f8fafc",borderLeft:"3px solid #0891b2"}}><div style={{display:"flex",justifyContent:"space-between",marginBottom:6}}><span style={{fontSize:12,fontWeight:700,fontFamily:"Outfit"}}>{ph.name}</span><span style={{fontSize:10,color:"#0891b2"}}>{ph.duration}</span></div>{ph.actions&&ph.actions.map(function(a,ai){return (<div key={ai} style={{display:"flex",justifyContent:"space-between",padding:"3px 0",borderBottom:"1px solid #e2e8f0",fontSize:10}}><span style={{color:"#475569"}}>{a.action}</span><span style={{color:"#7c3aed",fontWeight:600}}>{a.owner}</span></div>)})}</div>)})}</P>)}
            {planR.plan.kpis&&planR.plan.kpis.length>0&&(<P style={{marginBottom:10}}><SL color="#7c3aed">KPIs</SL><div style={{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(180px,1fr))",gap:6}}>{planR.plan.kpis.map(function(k,i){return (<div key={i} style={{padding:8,borderRadius:6,background:"#7c3aed08",border:"1px solid #7c3aed20"}}><div style={{fontSize:10,fontWeight:700,color:"#7c3aed"}}>{k.metric}</div><div style={{fontSize:10,color:"#94a3b8"}}>{k.current} \u2192 <span style={{color:"#059669"}}>{k.target}</span></div></div>)})}</div></P>)}
            {planR.plan.roi&&planR.plan.roi.investment&&(<P style={{marginBottom:10}}><SL color="#059669">ROI</SL><div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8}}><div style={{padding:8,borderRadius:6,background:"#dc262608"}}><div style={{fontSize:9,color:"#94a3b8"}}>INVEST</div><div style={{fontSize:14,fontWeight:800,color:"#dc2626"}}>{planR.plan.roi.investment}</div></div><div style={{padding:8,borderRadius:6,background:"#05966908"}}><div style={{fontSize:9,color:"#94a3b8"}}>RETURN</div><div style={{fontSize:14,fontWeight:800,color:"#059669"}}>{planR.plan.roi.expectedReturn}</div></div></div></P>)}
            {planR.plan.risks&&planR.plan.risks.length>0&&(<P><SL color="#d97706">Risks</SL>{planR.plan.risks.map(function(r,i){return (<div key={i} style={{display:"flex",gap:8,padding:"6px 0",borderBottom:"1px solid #f1f5f9",fontSize:10}}><span style={{color:"#d97706",fontWeight:700}}>\u26a0</span><span style={{color:"#475569",flex:1}}>{r.risk}</span><span style={{color:"#059669"}}>{r.mitigation}</span></div>)})}</P>)}
          </div>)}
        </div>)}

        {agentTab==="saved" && (<div>
          <div style={{display:"grid",gridTemplateColumns:"repeat(2,1fr)",gap:10,marginBottom:16}}>
            <P style={{padding:12,textAlign:"center"}}><div style={{fontSize:20,fontWeight:900,color:"#dc2626",fontFamily:"Outfit"}}>{savedCases.length}</div><div style={{fontSize:9,color:"#94a3b8",textTransform:"uppercase"}}>Saved Cases</div></P>
            <P style={{padding:12,textAlign:"center"}}><div style={{fontSize:20,fontWeight:900,color:"#059669",fontFamily:"Outfit"}}>{savedInsights.length}</div><div style={{fontSize:9,color:"#94a3b8",textTransform:"uppercase"}}>Saved Insights</div></P>
          </div>
          {savedCases.length>0&&(<P style={{marginBottom:12}}><SL color="#dc2626">Saved Cases</SL>{savedCases.map(function(c,i){return (<div key={i} style={{padding:8,borderRadius:6,border:"1px solid #e2e8f0",marginBottom:4,background:"#f8fafc"}}><div style={{display:"flex",justifyContent:"space-between"}}><div style={{fontSize:11,fontWeight:700}}>{c.title} <span style={{fontSize:9,color:"#94a3b8"}}>{c.year} {c.result}</span></div><button onClick={function(){var nc=savedCases.filter(function(_,j){return j!==i});setSavedCases(nc);persist("ll_cases",nc)}} style={{fontSize:9,color:"#dc2626",background:"none",border:"none",cursor:"pointer"}}>\u2715</button></div><div style={{fontSize:10,color:"#64748b"}}>{c.summary}</div></div>)})}</P>)}
          {savedInsights.length>0&&(<P style={{marginBottom:12}}><SL color="#059669">Saved Insights</SL>{savedInsights.map(function(ins,i){return (<div key={i} style={{padding:8,borderRadius:6,border:"1px solid #e2e8f0",marginBottom:4,background:ins.type==="compliance"?"#eff6ff":"#f0fdf4"}}><div style={{display:"flex",justifyContent:"space-between"}}><Tag c={ins.type==="compliance"?"#3b82f6":"#059669"}>{ins.type}</Tag><button onClick={function(){var ni=savedInsights.filter(function(_,j){return j!==i});setSavedInsights(ni);persist("ll_insights",ni)}} style={{fontSize:9,color:"#dc2626",background:"none",border:"none",cursor:"pointer"}}>\u2715</button></div><div style={{fontSize:10,color:"#475569",marginTop:4}}>{ins.text}</div></div>)})}</P>)}
          {savedCases.length===0&&savedInsights.length===0&&(<P style={{textAlign:"center",padding:30}}><div style={{fontSize:11,color:"#94a3b8"}}>Nothing saved yet. Use agents to generate and save content.</div></P>)}
          <P style={{marginTop:8,background:"#fffbeb",borderColor:"#fde68a"}}><div style={{fontSize:10,color:"#92400e"}}>üíæ Data persists across sessions via browser storage.</div></P>
        </div>)}
      </div>)}

    </main>
  );
}
